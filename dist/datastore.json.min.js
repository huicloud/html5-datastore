"undefined"==typeof ArrayBuffer&&(ArrayBuffer=function(){}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(["protobufjs"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DataStore=e()}}(function(){return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){(function(n){"undefined"==typeof Promise&&(n.Promise=e("promise")),t.exports=e("./lib/DataStore")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/DataStore":3,promise:25}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"parse",value:function(e){return Promise.reject("未实现")}}]),e}();n["default"]=i,t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u,a=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./util"),f=o(c),l=e("./dzhyun/DzhyunDataParser"),p=r(l),d=e("./dzhyun/DzhyunTokenManager");r(d);try{u=e("html5-connection")}catch(h){u=window.connection}var y=function(){function e(t,n,r,o,u){var a=this;i(this,e),this._promise=new Promise(function(e,t){a.resolve=e,a.reject=t}),this.qid=t,this.key=n,this.filter=r,this.subscribe=o,this.callbacks=[],this.queryObject=u}return s(e,[{key:"response",value:function(e){this.resolve(e),this.callbacks.forEach(function(t){t(e)})}},{key:"error",value:function(e){var t=new Error(e);this.reject(t),this.callbacks.forEach(function(e){e(t)})}},{key:"then",value:function(){var e;return(e=this._promise).then.apply(e,arguments)}},{key:"catch",value:function(){var e;return(e=this._promise)["catch"].apply(e,arguments)}}]),e}(),v=function(){function e(t){i(this,e),t=t||{},this.cacheEnable="undefined"==typeof t.cacheEnable?!1:t.cacheEnable,this.address=t.address||this.constructor.address,this.dataType=t.dataType||this.constructor.dataType||"pb",this.serviceUrl=t.serviceUrl,this.connectionType=t.connectionType,this.alone=t.alone||!1,this.fields=t.fields,this.dataParser=t.dataParser||new p["default"](this.serviceUrl||""),this.otherParams=t.otherParams,this.conn=null,this.idProperty=t.idProperty||"obj",this.cache={},this.requestQueue={},this.token=t.token||this.constructor.token,this.tokenManager=t.tokenManager||this.constructor.tokenManager,this.pushInterval=t.pushInterval||this.constructor.pushInterval,e._datastores.push(this)}return s(e,null,[{key:"_generateQid",value:function(){return e._qid=(e._qid||0)+1}},{key:"cancel",value:function(){e._datastores.forEach(function(e){e.cancel()})}},{key:"_datastores",value:[],enumerable:!0},{key:"_connectionHandler",value:{dataParser:new p["default"],open:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._open()})},request:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._request()})},response:function(t){var n=this.dataParser.parseUAResponse(t),r=n.Qid;r?e._datastores.forEach(function(e){e.requestQueue.hasOwnProperty(r)&&e._response(n)}):console.warn("Qid does not exist.")},close:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._close()})},error:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._error()})}},enumerable:!0}]),s(e,[{key:"_connection",value:function(){if(null===this.conn){var t,n=e._connMap=e._connMap||{},r=this.address;if(this.alone===!1&&(t=n[r]),!t){var o=f.extend({},e._connectionHandler),i={deferred:!0};t=this.connectionType?u[this.connectionType](r,i,o):u(r,i,o),this.alone===!1&&(n[r]=t)}this.conn=t,this.connectionType=t._protocol}}},{key:"_open",value:function(){}},{key:"_request",value:function(){}},{key:"_store",value:function(e){var t=this,n=Object.keys(e);n.forEach(function(n){var r=t.cache[n],o=e[n];o instanceof Array?(r=r||[],r.push.apply(r,o),t.cache[n]=r):t.cache[n]=o})}},{key:"_response",value:function(t){var n=this,r=t.Qid,o=t.Err,i=t.Data,u=this.requestQueue[r];if(u)if(0!==o)u.error(i?"string"==typeof i?i:i.toUTF8?i.toUTF8():JSON.stringify(i):"unknown error"),u.subscribe!==!0&&delete this.requestQueue[r];else{var a=this.dataParser.parseMsg(i);this.cacheEnable&&this._store(a);var s=a;if(u.filter&&(s=this._filter(a,u.filter)),u.response(s),u.subscribe!==!0)delete this.requestQueue[r];else if("http"===this.connectionType){var c=function f(){setTimeout(function(){e.pause===!0?f():u.start&&u.start()},n.pushInterval)};c()}}else;}},{key:"_close",value:function(){var e=this.requestQueue,t=Object.keys(e);t.forEach(function(t){var n=e[t];n.error("connection close")}),this.conn=null,this.cancel()}},{key:"_error",value:function(){var e=this.requestQueue,t=Object.keys(e);t.forEach(function(t){var n=e[t];n.error("request error")})}},{key:"_queryCache",value:function(e,t){if(this.cacheEnable===!1)return!1;var n;if(e){var n=this.cache[e];return n?this._filter(n,t):!1}return this._filter(this.cache,t)}},{key:"_filter",value:function(e,t){var n=e instanceof Array?e:[e];if("function"==typeof t)return n.filter(t);if("string"==typeof t)return JSONSelect.match(t,n);if("object"==typeof t){var r=[],o=Object.keys(t);return o.forEach(function(e){var n=t[e];r.push(":has(."+e+":expr(x"+n+"))")}),r=r.join(""),n.filter(function(e){return JSONSelect.match(r,e).length>0})}return e}},{key:"_requestParams",value:function(e,t,n){var r={qid:e,sub:n&&"ws"===this.connectionType?1:0,output:this.dataType},o=this._requestFieldStr();return o?r.field=o:null,f.param(f.extend(r,t,this.otherParams))}},{key:"_requestFieldStr",value:function(){return this.fields?this.fields instanceof Array?this.fields.join(","):"object"==typeof this.fields?Object.keys(this.fields).join(","):this.fields:null}},{key:"query",value:function(t,n,r){var o=this,i=n||{},u=i.filter;if(!t)return u?Promise.resolve(this._queryCache(null,u)):Promise.reject(new Error("query object is null"));var s=this.serviceUrl;if("string"==typeof t){if("/"===t[0]){var c=t.split("?"),l=a(c,2);s=l[0],t=l[1]}t=f.unParam(t||"")}var p=t[this.idProperty],d=i.subscribe||!1,h=i.request;i.partial!==!1;if(p instanceof Array&&(t[this.idProperty]=p.join(",")),p&&h!==!0){var v,b=Object.keys(this.requestQueue);if(b.some(function(e){var t=o.requestQueue[e];return t.key&&t.key.toString()===p.toString()?(r&&t.callbacks.push(r),v=t,!0):void 0}))return v;if(d!==!0&&this.cacheEnable!==!1){var _=p;"string"==typeof _&&(_=_.split(",").map(function(e){return e.trim()}));var w=[];if(_.every(function(e){var t=o._queryCache(e,u);return t!==!1?(w[e]=t,!0):!1})===!0)return Promise.resolve(w)}}this._connection();var n;"http"===this.connectionType&&"pb"===this.dataType&&(n={dataType:"arraybuffer"});var g=e._generateQid(),m=this._requestParams(g,t,d),v=new y(g,p,u,d,t);return this.requestQueue[g]=v,r&&v.callbacks.push(r),Promise.resolve(this.token||this.tokenManager&&this.tokenManager.getToken()).then(function(e){e&&("ws"===o.connectionType&&o.conn._address.indexOf("token=")<0?o.conn._address=o.conn._address+"?token="+e:"http"===o.connectionType&&(m=m+"&token="+e))})["catch"](function(e){console.warn("Request token fail")}).then(function(){v.start=function(){o.requestQueue[v.qid]===v&&o.conn.request(s+"?"+m,n)},v.start()}),v}},{key:"request",value:function(e,t){return this.query(e,f.extend(t,{subscribe:!1,request:!0}))}},{key:"subscribe",value:function(e,t,n){return"function"==typeof t?(n=t,t={}):t=t||{},this.query(e,f.extend(t,{subscribe:!0}),n)}},{key:"_cancelRequest",value:function(e){"ws"===this.connectionType&&this.conn&&this.conn.getStatus()===WebSocket.OPEN&&this.conn.request("/cancel?"+f.param({qid:e}))}},{key:"cancel",value:function(e){var t=this;if("number"==typeof e){var n=e;this._cancelRequest(n),delete this.requestQueue[n]}else{var r=this.requestQueue,o=Object.keys(r);o.forEach(function(n){var o=r[n];e&&o.key!==e||(t._cancelRequest(n),delete r[n])})}}},{key:"reset",value:function(e){this.cancel(),f.extend(this,e),this.cache={},this.requestQueue={},this.conn=null}}]),e}();n["default"]=v,v.address=null,v.datatype="pb",v.pushInterval=5e3,v.pause=!1,t.exports=n["default"]},{"./dzhyun/DzhyunDataParser":4,"./dzhyun/DzhyunTokenManager":5,"./util":13,"html5-connection":15}],4:[function(e,t,n){(function(r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,a=c=void 0}},c=e("../DataParser"),f=o(c),l=e("./parser"),p=o(l),d=e("./adapter/MSGAdapter"),h=o(d),y=e("./adapter/MSGDirectAdapter"),v=o(y),b=e("./pbTable"),_=o(b),w=e("html5-yfloat"),g=o(w),m={_default:new h["default"],_direct:new v["default"],news:new v["default"]},T=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.service=e}return u(t,e),a(t,[{key:"parseUAResponse",value:function(e){return p["default"].parse(e,"UAResponse")}},{key:"parseMsg",value:function(e){return this._adapter(p["default"].parse(e,"MSG"))}},{key:"parse",value:function(e){var t=this;return new Promise(function(n,r){var o=t.parseUAResponse(e);e=o.Data,0!==o.Err?r({qid:o.Qid,error:e?"string"==typeof e?e:e.toUTF8?e.toUTF8():JSON.stringify(e):"unknown error"}):n({qid:o.Qid,data:t.parseMsg(e)})})}},{key:"_adapter",value:function(e){var t=this;if(!e)return e;var n=Object.keys(m),r=this.direct?m._direct:m._default;return n.some(function(e){return t.service.indexOf(e)>=0?(r=m[e],!0):void 0}),r.adapt(e)}}]),t}(f["default"]);n["default"]=T,T.prototype.direct=!1,T.parser=p["default"],T.MSGAdapter=h["default"],T.pbTable=_["default"],T.yfloat=g["default"];var E=r||void 0;E.DzhyunDataParser=T,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../DataParser":2,"./adapter/MSGAdapter":7,"./adapter/MSGDirectAdapter":8,"./parser":10,"./pbTable":11,"html5-yfloat":24}],5:[function(e,t,n){(function(r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("html5-connection"),c=i(s),f=e("../util"),l=o(f),p=e("./DzhyunDataParser"),d=i(p),h=function(){function e(t,n,r){u(this,e),this.address=t,this.params=n,this.refreshSecond=r}return a(e,[{key:"_request",value:function(e,t){var n=this;return new Promise(function(r,o){c["default"].http(n.address,{},{response:r,error:o}).request(e+"?"+l.param(t))}).then(function(t){return new d["default"](e).parse(t)}).then(function(e){if(e=e.data[0],0==e.result)return e;throw e})}},{key:"access",value:function(e){return this._request("/token/access",e)}},{key:"refresh",value:function(e){return this._request("/token/refresh",e)}},{key:"getToken",value:function(){var e=this;return this._promise||(this._promise=Promise.resolve(this._token||this.access(this.params).then(function(t){return e._token=t.token,e._promise=null,e._refreshToken(t),e._token})))}},{key:"_refreshToken",value:function(e){var t=this,n=parseInt(e.duration),r=this.refreshSecond;0!==r&&(r=r||Math.max(n-60,10),this._refreshTimeout&&clearTimeout(this._refreshTimeout),this._refreshTimeout=setTimeout(function(){t._refreshTimeout=null,t.access(t.params).then(function(e){t._token=e.token,t._promise=null,t._refreshToken(e)})["catch"](function(){t._token=null,t._promise=null})},1e3*r))}}]),e}();n["default"]=h;var y=r||void 0;y.DzhyunTokenManager=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13,"./DzhyunDataParser":4,"html5-connection":15}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"adapt",value:function(){}}]),e}();n["default"]=i,t.exports=n["default"]},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,a=c=void 0}},s=e("../pbTable"),c=r(s),f=e("../jsonTable"),l=r(f),p=e("./BaseDataAdapter"),d=r(p),h=e("html5-yfloat"),y=r(h),v=e("../protobuf"),b=r(v),_=b["default"].Long,w=["Id","Obj","ObjCount"],g=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"parseYFloat",value:function(e){var t=this;if(e){if("number"==typeof e||e instanceof _)return y["default"].unmakeValueToNumber(e);if(e instanceof Array){var n=[];return e.forEach(function(e){n.push(t.parseYFloat(e))}),n}if("object"==typeof e){var r=Object.keys(e);return r.forEach(function(n){e[n]=t.parseYFloat(e[n])}),e}return e}return e}},{key:"adapt",value:function(e){var t,n=e._isPb;if(null!=e.Tbl)t=c["default"].convertToJsonArray(e.Tbl,{filter:function(e,t){if("number"==typeof e||e instanceof _){if(n&&void 0!==t){var r=t.previousValue,o=t.dq;if(void 0===o){var i=y["default"].unmakeValue(e);return o=t.dq=i[1],t.previousValue=i[0]}e instanceof _&&(e=e.toNumber());var u=Math.pow(10,o);return t.previousValue=Number((r*u+e).toFixed())/u}return n?y["default"].unmakeValueToNumber(e):e}return!0}}),t=t[0],t=t[Object.keys(t)[0]];else if(null!=e.JsonTbl)t=l["default"].convertToJsonArray(e.JsonTbl),t=t[0],t=t[Object.keys(t)[0]];else{var r=Object.keys(e).sort(function(e,t){return 0===e.indexOf("RepData")?-1:0===t.indexOf("RepData")?1:0});r.some(function(n){var r=e[n];return w.indexOf(n)<0&&null!==r&&(!(r instanceof Array)||r.length>0)?(t=r,!0):void 0}),n===!0&&(t=this.parseYFloat(t))}return this.format(t,e.Obj)}},{key:"format",value:function(e,t){var n=e;return n instanceof Array?n.length>0&&n[0].hasOwnProperty("Obj")&&(n={},e.forEach(function(e){n[e.Obj]=e.Data||e})):null!==t&&(n={},n[t]=e),n}}]),t}(d["default"]);n["default"]=g,t.exports=n["default"]},{"../jsonTable":9,"../pbTable":11,"../protobuf":12,"./BaseDataAdapter":6,"html5-yfloat":24}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,a=c=void 0}},s=e("./MSGAdapter"),c=r(s),f=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"format",value:function(e){return e}}]),t}(c["default"]);n["default"]=f,t.exports=n["default"]},{"./MSGAdapter":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e){if(!e||!e.head)return e;var t=e.head,n=e.data;return n.map(function(e){var n={};return e.forEach(function(e,r){n[t[r]]=o(e)}),n})};n["default"]={convertToJsonArray:r},t.exports=n["default"]},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dzhyun"),i=r(o),u=e("./protobuf"),a=r(u),s=a["default"].ByteBuffer;n["default"]={stringToArrayBuffer:function(e){for(var t=e.length,n=new ArrayBuffer(2*t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n},arrayBufferToString:function(e){var t=new Uint8Array(e),n=t.length;if(n>65535){var r=0,o=[];do{var i=t.subarray(r,r+=65535);o.push(String.fromCharCode.apply(null,i))}while(n>r);return decodeURIComponent(escape(o.join("")))}return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},parseProtoBuf:function(e,t){var n=i["default"][t].decode(e);return n&&(n._isPb=!0),n},isBuffer:function(e){return e.constructor&&"Buffer"===e.constructor.name},parse:function(e,t){var n=e;try{if(!e)return e;if("string"==typeof e)try{n=JSON.parse(e)}catch(r){n=this.parseProtoBuf(this.stringToArrayBuffer(e),t)}else if(e instanceof ArrayBuffer)try{n=this.parseProtoBuf(e,t)}catch(r){n=JSON.parse(this.arrayBufferToString(e))}else if(this.isBuffer(e))try{n=this.parseProtoBuf(e,t)}catch(r){n=JSON.parse(e.toString("utf8"))}else e instanceof s&&(n=this.parseProtoBuf(e,t))}catch(r){console.warn(new Date+",Fail parse data ["+e+"]",r.message)}return n}},t.exports=n["default"]},{"./dzhyun":14,"./protobuf":12}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dzhyun"),i=r(o),u=e("./protobuf"),a=r(u),s=a["default"].ByteBuffer,c=i["default"].InfoType||{Type_Int:105,Type_Float:102,Type_Double:100,Type_String:115,Type_Binary:98,Type_Table:116,Type_SInt:120,Type_Unknow:0},f=i["default"].Table,l={};l[c.Type_Int]="i",l[c.Type_Float]="f",l[c.Type_Double]="d",l[c.Type_String]="s",l[c.Type_Binary]="b",l[c.Type_Table]="t",l[c.Type_SInt]="x";var p={},d=function(e){this.options=e||{},this._tableInfoStack=[]};d.prototype={_pbTableDecode:function(e){return e instanceof ArrayBuffer||e instanceof s?f.decode(e):e},_getColumnDataValues:function(e,t){if(t!==c.Type_Unknow){var n=l[t]+"Values";return e[n]}return e.iValues||e.fValues||e.dValues||e.sValues||e.bValues||e.tValues||e.xValues},_retrieveValue:function(e,t,n,r){return t==c.Type_Table&&(e=this.convert(e,0===r)),0===r||t!=c.Type_Int&&t!=c.Type_SInt||!n||(e*=n),e},_convertColumn:function(e,t,n){var r=e.Index;t=t||{};var o=t.Name||r,i=t.Type||c.Type_Unknow,u=t.Ratio,a=this._getColumnDataValues(e,i);if(null==a)throw new Error("column["+r+"] data is null");this._columnToRow(a,r,o,i,u,n)},_columnToRow:function(e,t,n,r,o,i){var u={previousValue:0,dq:void 0};e.forEach(function(e,t){var a=i[t];if(void 0===a&&(a={},i.push(a)),e=this._retrieveValue(e,r,o,t),"function"==typeof this.options.filter){var s=this.options.filter(e,r==c.Type_SInt?u:void 0);s===!1||(s===!0||void 0===s?a[n]=e:e=a[n]=s)}else a[n]=e}.bind(this)),this._tableInfoStack.pop()},convert:function(e,t){var n=this._pbTableDecode(e),r=n.Tiid,o=n.Info;if(o&&0!==o.length)t===!0?this._tableInfoStack.push(o):null,p[r]=o;else{var i=this._tableInfoStack.length;o=t===!1&&i>0?this._tableInfoStack[i]:p[r]}var u=[],a=n.Data||n.DataX;if(!a)throw new Error("table data undefined");return a.forEach(function(e){var t=e.Index,n=o?o[t]:null;this._convertColumn(e,n,u)}.bind(this)),u}},n["default"]={convertToJsonArray:function(e,t){return new d(t).convert(e)},convertToJsonTable:function(e,t){var n=new d(t);return n._columnToRow=function(e,t,n,r,o,i){var u=0;e.forEach(function(e,t){var n=i[t];void 0===n&&(n=[],i.push(n)),u=this._retrieveValue(e,u,r,o),n.push(u)}.bind(this))},n.convert(e)}},t.exports=n["default"]},{"./dzhyun":14,"./protobuf":12}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o;try{o=e("protobufjs")}catch(i){o="undefined"!=typeof dcodeIO&&dcodeIO.ProtoBuf}o||(o={},o.Long=function u(){r(this,u)},o.ByteBuffer=function a(){r(this,a)}),n["default"]=o,t.exports=n["default"]},{protobufjs:"protobufjs"}],13:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e){0===e.indexOf("?")&&(e=e.substring(1));var t,n,r=e.split("&"),o={};for(n in r)""!==r[n]&&(t=r[n].split("="),o[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return o}Object.defineProperty(n,"__esModule",{value:!0}),n.unParam=i;var u=e("html5-connection/lib/util");o(n,r(u,o))},{"html5-connection/lib/util":23}],14:[function(e,t,n){},{}],15:[function(e,t,n){e("./lib/HttpConnection"),e("./lib/WebSocketConnection"),t.exports=e("./lib/connection")},{"./lib/HttpConnection":17,"./lib/WebSocketConnection":19,"./lib/connection":22}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o,i){r(this,e),this._address=t,this.options=n||{},"boolean"==typeof o?(this._secure=o,this._handler=null):(this._secure=i||!1,this._handler=o),this._protocol="http",this._listenerMap={}}return o(e,[{key:"getAddress",value:function(){return this.getProtocol()+"://"+this._address.replace(/^(\w+:\/\/)?/,"")}},{key:"getProtocol",value:function(){return this._protocol+(this._secure?"s":"")}},{key:"request",value:function(e,t){}},{key:"send",value:function(e,t){this.request(e,t)}},{key:"close",value:function(){}},{key:"on",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]);n.indexOf(t)<0&&n.push(t)}return this}},{key:"off",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]),r=n.indexOf(t);r>=0&&n.splice(r,1)}return this}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];var i=this._listenerMap[e];return i&&i.forEach(function(e){return e.apply(t,r)}),this._handler&&"function"==typeof this._handler[e]&&this._handler[e].apply(this._handler,r),this}}]),e}();i.EVENT_OPEN="open",i.EVENT_CLOSE="close",i.EVENT_ERROR="error",i.EVENT_REQUEST="request",i.EVENT_SEND="send",i.EVENT_RESPONSE="response",i.EVENT_MESSAGE="message",i.EVENT_PROGRESS="progress",n["default"]=i,t.exports=n["default"]},{}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0}},s=e("./connection"),c=r(s),f=e("./BaseConnection"),l=r(f),p=e("./util"),d=e("./ajax"),h=r(d),y=function(e){function t(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this._request=[]}return i(t,e),u(t,[{key:"request",value:function(e,t){var n=this;t=(0,p.extend)({},this.options,t),t.success=function(e,t,r){n.trigger(l["default"].EVENT_MESSAGE,e),n.trigger(l["default"].EVENT_RESPONSE,e)},t.error=function(e,t,r){n.trigger(l["default"].EVENT_ERROR,r)},t.complete=function(){var e=n._request.indexOf(r);n._request.splice(e,1)},t.url=this.getAddress()+(e?e:"");var r=(0,h["default"])(t);return r&&(r.onreadystatechange=function(e){return function(){2===r.readyState&&(n.trigger(l["default"].EVENT_SEND),n.trigger(l["default"].EVENT_REQUEST)),e&&e()}}(r.onreadystatechange)),this.trigger(l["default"].EVENT_OPEN),this._request.push(r),r.onprogress=function(e){n.trigger(l["default"].EVENT_PROGRESS,e)},this}},{key:"close",value:function(){var e=this;return this._request.forEach(function(t,n){t.abort(),e._request.splice(n,1)}),this.trigger(l["default"].EVENT_CLOSE),this}}]),t}(l["default"]);n["default"]=y,c["default"].http=function(e,t,n){return new y(e,t,n,!1)},c["default"].https=function(e,t,n){return new y(e,t,n,!0)},t.exports=n["default"]},{"./BaseConnection":16,"./ajax":21,"./connection":22,"./util":23}],18:[function(e,t,n){"use strict";if("undefined"!=typeof window)window.WebSocket?t.exports=window.WebSocket:console.log("当前浏览器不支持WebSocket");else if("undefined"!=typeof WebSocket)t.exports=WebSocket;else{var r="ws";t.exports=e(r)}},{}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0}},s=e("./connection"),c=r(s),f=e("./BaseConnection"),l=r(f),p=e("./WebSocket"),d=r(p),h=function(e){function t(e,n,r){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this._protocol="ws",this._ws=null;var i=n&&n.deferred===!0||!1;i===!1&&this._connect()}return i(t,e),u(t,[{key:"getStatus",value:function(){return this._ws?this._ws.readyState:d["default"].CLOSED}},{key:"_connect",value:function(){var e=this;if("undefined"==typeof d["default"])throw Error("Don't support WebSocket");this._ws=new d["default"](this.getAddress()),void 0===d["default"].OPEN&&(d["default"].CONNECTING=this._ws.CONNECTING,d["default"].OPEN=this._ws.OPEN,d["default"].CLOSING=this._ws.CLOSING,d["default"].CLOSED=this._ws.CLOSED),this._ws.binaryType=this.options.binaryType||this.options.dataType||"arraybuffer",this._ws.addEventListener("open",function(){e.trigger(l["default"].EVENT_OPEN)}),this._ws.addEventListener("error",function(){e.trigger(l["default"].EVENT_ERROR)}),this._ws.addEventListener("close",function(){e.trigger(l["default"].EVENT_CLOSE)}),this._ws.addEventListener("message",function(t){e.trigger(l["default"].EVENT_MESSAGE,t.data),e.trigger(l["default"].EVENT_RESPONSE,t.data)})}},{key:"request",value:function(e,t){var n=this;return e=e||"",this.getStatus()===d["default"].CLOSED&&this._connect(),this.getStatus()!==d["default"].OPEN?this._ws.addEventListener("open",function(){n._ws.send(e),n.trigger(l["default"].EVENT_SEND),n.trigger(l["default"].EVENT_REQUEST)}):(this._ws.send(e),this.trigger(l["default"].EVENT_SEND),this.trigger(l["default"].EVENT_REQUEST)),this}},{key:"close",
value:function(){return this.getStatus()!==d["default"].CLOSED&&(this._ws.close(),this._ws=null),this}}]),t}(l["default"]);n["default"]=h,c["default"].ws=function(e,t,n){return new h(e,t,n,!1)},c["default"].wss=function(e,t,n){return new h(e,t,n,!0)},t.exports=n["default"]},{"./BaseConnection":16,"./WebSocket":18,"./connection":22}],20:[function(e,t,n){"use strict";if("undefined"!=typeof window)window.XMLHttpRequest?t.exports=window.XMLHttpRequest:console.log("当前浏览器不支持XMLHttpRequest");else if("undefined"!=typeof XMLHttpRequest)t.exports=XMLHttpRequest;else{var r="xhr2",o=e(r);t.exports=o.XMLHttpRequest||o}},{}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0})}function i(e){if("undefined"==typeof ArrayBuffer)throw new Error("不支持ArrayBuffer类型");if(e.response instanceof ArrayBuffer)return e.response;for(var t=e.responseText,n=t.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;n>i;i++)o[i]=255&t.charCodeAt(i);return r}function u(e){if("undefined"==typeof Blob)throw new Error("不支持Blob类型");if(e.response instanceof Blob)return e.response;var t=i(e);return new Blob([t])}var a=e("./XMLHttpRequest"),s=r(a),c=e("./util");if("undefined"!=typeof $&&"function"==typeof $.ajax&&"undefined"==typeof XDomainRequest){var f=function(e,t,n){return{send:function(t,n){var r,a,s,c;c=e.xhr(),s=e.url,a=e.type,r=e.data||null,c.onload=function(){var t="arraybuffer"===e.dataType?i(c):u(c),r=o({},e.dataType,t);return n(c.status,c.statusText,r,c.getAllResponseHeaders())},c.onerror="error",function(e){return n(-1,e)},c.ontimeout=function(e){return n(-1,e)},c.open(a,s,!0);var f="string"==typeof c.responseType;f?c.responseType=e.dataType:c.overrideMimeType?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined");for(var l in t)c.setRequestHeader(l,t[l]);return c.send(r)},abort:function(){return n.abort()}}},l=$.ajaxSettings.xhr;$.support.cors=!0,$.ajaxSetup({xhr:function O(){var O=l.call(this);return this.setXHR(O),O},beforeSend:function(e,t){t.setXHR=function(t){t.abort=e.abort,e.xhr=t}},crossDomain:!0}),$.ajaxTransport("+arraybuffer",f),$.ajaxTransport("+blob",f),t.exports=function(){var e=$.ajax.apply($,[].slice.call(arguments));return e.xhr}}else{var p,d,h,y,v,b,_,w,g,m,T,E;!function(){var e=function(e,t,n){return!0},n=function(t,n,r,o){return t.global?e(n||h,r,o):void 0},r=function(e){e.global&&0===E.active++&&n(e,null,"ajaxStart")},o=function(e){e.global&&!--E.active&&n(e,null,"ajaxStop")},a=function(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||n(t,r,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,r,"ajaxSend",[e,t])},f=function(e,t,r){var o=r.context,i="success";r.success.call(o,e,i,t),n(r,o,"ajaxSuccess",[t,r,e]),O(i,t,r)},l=function(e,t,r,o){var i=o.context;o.error.call(i,r,t,e),n(o,i,"ajaxError",[r,o,e]),O(t,r,o)},O=function(e,t,r){var i=r.context;r.complete.call(i,t,e),n(r,i,"ajaxComplete",[t,r]),o(r)},j=function(){},k=function(e){return e&&(e==m?"html":e==g?"json":_.test(e)?"script":w.test(e)&&"xml")||"text"},x=function(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")},S=function(e){"object"==typeof e.data&&(e.data=(0,c.param)(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=x(e.url,e.data))};p=0,d="undefined"==typeof window,h=!d&&window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,g="application/json",m="text/html",T=/^\s*$/,E=t.exports=function(e){var t=(0,c.extend)({},e||{});for(y in E.settings)void 0===t[y]&&(t[y]=E.settings[y]);r(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&!d&&!!window.location&&RegExp.$2!=window.location.host);var n=t.dataType,o=/=\?/.test(t.url);if("jsonp"==n||o)return o||(t.url=x(t.url,"callback=?")),E.JSONP(t);t.url||(t.url=!d&&!!window.location&&window.location.toString()),S(t);var s,p=t.accepts[n],h={},b=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:!d&&!!window.location&&window.location.protocol,_=E.settings.xhr();t.crossDomain?"undefined"!=typeof XDomainRequest&&(_=new XDomainRequest,_.onload=function(){_.readyState=4,_.status=200,_.onreadystatechange()},_.error=function(){_.readyState=4,_.status=400,_.onreadystatechange()}):h["X-Requested-With"]="XMLHttpRequest",p&&(h.Accept=p,p.indexOf(",")>-1&&(p=p.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(p)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(h["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=(0,c.extend)(h,t.headers||{}),_.onreadystatechange=function(){if(4==_.readyState){clearTimeout(s);var e,r=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==b){n=n||k(_.contentType||_.getResponseHeader&&_.getResponseHeader("content-type"));try{"script"==n?(1,eval)(e):e="xml"==n?_.responseXML:"json"==n?T.test(_.responseText)?null:JSON.parse(_.responseText):"arraybuffer"===n?i(_):"blob"===n?u(_):_.responseText}catch(o){r=o}r?l(r,"parsererror",_,t):f(e,_,t)}else l(null,"error",_,t)}};var w="async"in t?t.async:!0;if(_.open(t.type,t.url,w),"arraybuffer"==n||"blob"==n){var g="string"==typeof _.responseType;g?_.responseType=e.dataType:_.overrideMimeType?_.overrideMimeType("text/plain; charset=x-user-defined"):_.setRequestHeader("Accept-Charset","x-user-defined")}for(v in t.headers)_.setRequestHeader(v,t.headers[v]);return a(_,t)===!1?(_.abort(),!1):(t.timeout>0&&(s=setTimeout(function(){_.onreadystatechange=j,_.abort(),l(null,"timeout",_,t)},t.timeout)),_.send(t.data?t.data:null),_)},E.active=0,E.JSONP=function(e){if(!("type"in e))return E(e);var t,n="jsonp"+ ++p,r=h.createElement("script"),o=function(){!d&&n in window&&(window[n]=j),O("abort",i,e)},i={abort:o},u=h.getElementsByTagName("head")[0]||h.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error()}),d||(window[n]=function(r){clearTimeout(t),delete window[n],f(r,i,e)}),S(e),r.src=e.url.replace(/=\?/,"="+n),u.insertBefore(r,u.firstChild),e.timeout>0&&(t=setTimeout(function(){i.abort(),O("timeout",i,e)},e.timeout)),i},E.settings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new s["default"]},accepts:{script:"text/javascript, application/javascript",json:g,xml:"application/xml, text/xml",html:m,text:"text/plain"},crossDomain:!1,timeout:0},E.get=function(e,t){return E({url:e,success:t})},E.post=function(e,t,n,r){return"function"==typeof t&&(r=r||n,n=t,t=null),E({type:"POST",url:e,data:t,success:n,dataType:r})},E.getJSON=function(e,t){return E({url:e,success:t,dataType:"json"})}}()}},{"./XMLHttpRequest":20,"./util":23}],22:[function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t,n){if("string"!=typeof e)throw new Error("url is incorrect");var i=/^((\w+):\/\/)?(.*)/.exec(e),u=r(i,4),a=u[2],s=void 0===a?"http":a,c=u[3],f=o[s];if(!f)throw new Error('protocol "'+s+'" no support');return f(c,t,n)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o,t.exports=n["default"]},{}],23:[function(e,t,n){"use strict";function r(e,t,n,o){var i=t instanceof Array;for(var u in t){var a=t[u];o&&(u=n?o:o+"["+(i?"":u)+"]"),!o&&i?e.add(a.name,a.value):(n?a instanceof Array:"object"==typeof a)?r(e,a,n,u):e.add(u,a)}}function o(e,t){var n=[];return n.add=function(e,t){this.push(u(e)+"="+u(t))},r(n,e,t),n.join("&").replace("%20","+")}function i(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e}Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=r,n.param=o,n.extend=i;var u=encodeURIComponent},{}],24:[function(e,t,n){function r(e){return e/f|0}function o(e){return e%f|0}function i(e,t){return(t>>>0)*f+(e>>>0)}function u(e){var t,n;if("number"==typeof e&&e>0)t=r(e),n=o(e);else{if(!e||"function"!=typeof e.getHighBits||"function"!=typeof e.getLowBits)return console.warn("unmakeValue: invalid value"),[NaN,0];t=e.getHighBits(),n=e.getLowBits()}var u=n>>16&255,a=15&u,s=u>>4&15,c=i((t<<24)+(n>>>24<<16)+(65535&n),t>>8),f=[2,1,null,3,4,5,6,7,8,9,0][a],l=null!=f?c/(Math.pow(10,f)||1):NaN;return 0!=s&&(l=-l),[l,f]}function a(e){return u(e)[0]}function s(e){var t=u(e),n=t[0],r=t[1];return null!==r?n.toFixed(r):n.toString()}var c=65536,f=c*c;t.exports={unmakeValue:u,unmakeValueToNumber:a,unmakeValueToString:s}},{}],25:[function(e,t,n){"use strict";t.exports=e("./lib")},{"./lib":30}],26:[function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(t){return v=t,b}}function i(e,t){try{return e(t)}catch(n){return v=n,b}}function u(e,t,n){try{e(t,n)}catch(r){return v=r,b}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&h(e,this)}function s(e,t,n){return new e.constructor(function(o,i){var u=new a(r);u.then(o,i),c(e,new d(t,n,u))})}function c(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void y(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?f(t.promise,e._12):l(t.promise,e._12));var r=i(n,e._12);r===b?l(t.promise,v):f(t.promise,r)})}function f(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=o(t);if(n===b)return l(e,v);if(n===e.then&&t instanceof a)return e._37=3,e._12=t,void p(e);if("function"==typeof n)return void h(n.bind(t),e)}e._37=1,e._12=t,p(e)}function l(e,t){e._37=2,e._12=t,p(e)}function p(e){for(var t=0;t<e._59.length;t++)c(e,e._59[t]);e._59=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1,r=u(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,l(t,e))});n||r!==b||(n=!0,l(t,v))}var y=e("asap/raw"),v=null,b={};t.exports=a,a._99=r,a.prototype.then=function(e,t){if(this.constructor!==a)return s(this,e,t);var n=new a(r);return c(this,new d(e,t,n)),n}},{"asap/raw":33}],27:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})}},{"./core.js":26}],28:[function(e,t,n){"use strict";function r(e){var t=new o(o._99);return t._37=1,t._12=e,t}var o=e("./core.js");t.exports=o;var i=r(!0),u=r(!1),a=r(null),s=r(void 0),c=r(0),f=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return a;if(void 0===e)return s;if(e===!0)return i;if(e===!1)return u;if(0===e)return c;if(""===e)return f;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(u,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof o&&a.then===o.prototype.then){for(;3===a._37;)a=a._12;return 1===a._37?r(u,a._12):(2===a._37&&n(a._12),void a.then(function(e){r(u,e)},n))}var s=a.then;if("function"==typeof s){var c=new o(s.bind(a));return void c.then(function(e){r(u,e)},n)}}t[u]=a,0===--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,u=0;u<t.length;u++)r(u,t[u])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":26}],29:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.prototype["finally"]=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},{"./core.js":26}],30:[function(e,t,n){"use strict";t.exports=e("./core.js"),e("./done.js"),e("./finally.js"),e("./es6-extensions.js"),e("./node-extensions.js")},{"./core.js":26,"./done.js":27,"./es6-extensions.js":28,"./finally.js":29,"./node-extensions.js":31}],31:[function(e,t,n){"use strict";var r=e("./core.js"),o=e("asap");t.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,t>0?t:0);return new r(function(t,r){o.push(function(e,n){e?r(e):t(n)});var i=e.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||t(i)})}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,i=this;try{return e.apply(this,arguments).nodeify(n,i)}catch(u){if(null===n||"undefined"==typeof n)return new r(function(e,t){t(u)});o(function(){n.call(i,u)})}}},r.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},{"./core.js":26,asap:32}],32:[function(e,t,n){"use strict";function r(){if(s.length)throw s.shift()}function o(e){var t;t=a.length?a.pop():new i,t.task=e,u(t)}function i(){this.task=null}var u=e("./raw"),a=[],s=[],c=u.makeRequestCallFromTimer(r);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(s.push(e),c())}finally{this.task=null,a[a.length]=this}}},{"./raw":33}],33:[function(e,t,n){(function(e){"use strict";function n(e){a.length||(u(),s=!0),a[a.length]=e}function r(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>f){for(var t=0,n=a.length-c;n>t;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,s=!1}function o(e){var t=1,n=new l(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var u,a=[],s=!1,c=0,f=1024,l=e.MutationObserver||e.WebKitMutationObserver;u="function"==typeof l?o(r):i(r),n.requestFlush=u,n.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});