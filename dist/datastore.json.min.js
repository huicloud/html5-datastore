"undefined"==typeof ArrayBuffer&&(ArrayBuffer=function(){}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(["protobufjs"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DataStore=e()}}(function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(n){"undefined"==typeof Promise&&(n.Promise=e("promise/polyfill")),t.exports=e("./lib/DataStore")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/DataStore":3,"promise/polyfill":31}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"parse",value:function(e){return Promise.reject("未实现")}}]),e}();n["default"]=i,t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./util"),f=o(s),c=e("./dzhyun/DzhyunDataParser"),l=r(c),p=e("./dzhyun/DzhyunTokenManager"),d=(r(p),e("html5-connection")),h=r(d),y=function(){function e(t,n,r,o,a){var u=this;i(this,e),this._promise=new Promise(function(e,t){u.resolve=e,u.reject=t}),this.qid=t,this.key=n,this.filter=r,this.subscribe=o,this.callbacks=[],this.queryObject=a}return u(e,[{key:"response",value:function(e){this.resolve(e),this.callbacks.forEach(function(t){t(e)})}},{key:"error",value:function(e){var t=new Error(e);this.reject(t),this.callbacks.forEach(function(e){e(t)})}},{key:"then",value:function(){var e;return(e=this._promise).then.apply(e,arguments)}},{key:"catch",value:function(){var e;return(e=this._promise)["catch"].apply(e,arguments)}}]),e}(),v=function(){function e(t){i(this,e),t=t||{},this.cacheEnable="undefined"==typeof t.cacheEnable?!1:t.cacheEnable,this.address=t.address||this.constructor.address,this.dataType=t.dataType||this.constructor.dataType||"pb",this.compresser=t.compresser||this.constructor.compresser||null,this.serviceUrl=t.serviceUrl,this.connectionType=t.connectionType,this.alone=t.alone||!1,this.fields=t.fields,this.dataParser=t.dataParser||new l["default"](this.serviceUrl||""),this.dataParser.parseUAResponse=this.dataParser.parseUAResponse.bind(this.dataParser,this.compresser),this.otherParams=t.otherParams,this.conn=null,this.idProperty=t.idProperty||"obj",this.cache={},this.requestQueue={},this.token=t.token||this.constructor.token,this.tokenManager=t.tokenManager||this.constructor.tokenManager,this.pushInterval=t.pushInterval||this.constructor.pushInterval,e._datastores.push(this)}return u(e,null,[{key:"_generateQid",value:function(){return e._qid=(e._qid||0)+1}},{key:"cancel",value:function(){e._datastores.forEach(function(e){e.cancel()})}},{key:"_datastores",value:[],enumerable:!0},{key:"_connectionHandler",value:{dataParser:new l["default"],open:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._open()})},request:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._request()})},response:function(t){var n=this.dataParser.parseUAResponse(t),r=n.Qid;r?e._datastores.forEach(function(e){e.requestQueue.hasOwnProperty(r)&&e._response(n)}):console.warn("Qid does not exist.")},close:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._close()})},error:function(){var t=this;e._datastores.forEach(function(e){e.conn&&t===e.conn._handler&&e._error()})}},enumerable:!0}]),u(e,[{key:"_connection",value:function(){if(null===this.conn){var t,n=e._connMap=e._connMap||{},r=this.address;if(this.alone===!1&&(t=n[r]),!t){var o=f.extend({},e._connectionHandler,{dataParser:this.dataParser}),i={deferred:!0};t=this.connectionType?h["default"][this.connectionType](r,i,o):(0,h["default"])(r,i,o),this.alone===!1&&(n[r]=t)}this.conn=t,this.connectionType=t._protocol}}},{key:"_open",value:function(){}},{key:"_request",value:function(){}},{key:"_store",value:function(e){var t=this,n=Object.keys(e);n.forEach(function(n){var r=t.cache[n],o=e[n];o instanceof Array?(r=r||[],r.push.apply(r,o),t.cache[n]=r):t.cache[n]=o})}},{key:"_response",value:function(t){var n=this,r=t.Qid,o=t.Err,i=t.Data,a=this.requestQueue[r];if(a)if(0!==o)a.error(i?"string"==typeof i?i:i.toUTF8?i.toUTF8():JSON.stringify(i):"unknown error"),a.subscribe!==!0&&delete this.requestQueue[r];else{var u=this.dataParser.parseMsg(i);this.cacheEnable&&this._store(u);var s=u;if(a.filter&&(s=this._filter(u,a.filter)),a.response(s),a.subscribe!==!0)delete this.requestQueue[r];else if("http"===this.connectionType){var f=function c(){setTimeout(function(){e.pause===!0?c():a.start&&a.start()},n.pushInterval)};f()}}else;}},{key:"_close",value:function(){var e=this.requestQueue,t=Object.keys(e);t.forEach(function(t){var n=e[t];n.error("connection close")}),this.conn=null,this.cancel()}},{key:"_error",value:function(){var e=this.requestQueue,t=Object.keys(e);t.forEach(function(t){var n=e[t];n.error("request error")})}},{key:"_queryCache",value:function(e,t){if(this.cacheEnable===!1)return!1;var n;if(e){var n=this.cache[e];return n?this._filter(n,t):!1}return this._filter(this.cache,t)}},{key:"_filter",value:function(e,t){var n=e instanceof Array?e:[e];if("function"==typeof t)return n.filter(t);if("string"==typeof t)return JSONSelect.match(t,n);if("object"==typeof t){var r=[],o=Object.keys(t);return o.forEach(function(e){var n=t[e];r.push(":has(."+e+":expr(x"+n+"))")}),r=r.join(""),n.filter(function(e){return JSONSelect.match(r,e).length>0})}return e}},{key:"_requestParams",value:function(e,t,n){var r={qid:e,sub:n&&"ws"===this.connectionType?1:0,output:this.dataType,compresser:this.compresser},o=this._requestFieldStr();return o?r.field=o:null,f.param(f.extend(r,t,this.otherParams))}},{key:"_requestFieldStr",value:function(){return this.fields?this.fields instanceof Array?this.fields.join(","):"object"==typeof this.fields?Object.keys(this.fields).join(","):this.fields:null}},{key:"query",value:function(t,n,r){var o=this,i=n||{},u=i.filter;if(!t)return u?Promise.resolve(this._queryCache(null,u)):Promise.reject(new Error("query object is null"));var s=this.serviceUrl;if("string"==typeof t){if("/"===t[0]){var c=t.split("?"),l=a(c,2);s=l[0],t=l[1]}t=f.unParam(t||"")}var p=t[this.idProperty],d=i.subscribe||!1,h=i.request;i.partial!==!1;if(p instanceof Array&&(t[this.idProperty]=p.join(",")),p&&h!==!0){var v,b=Object.keys(this.requestQueue);if(b.some(function(e){var t=o.requestQueue[e];return t.key&&t.key.toString()===p.toString()?(r&&t.callbacks.push(r),v=t,!0):void 0}))return v;if(d!==!0&&this.cacheEnable!==!1){var _=p;"string"==typeof _&&(_=_.split(",").map(function(e){return e.trim()}));var w=[];if(_.every(function(e){var t=o._queryCache(e,u);return t!==!1?(w[e]=t,!0):!1})===!0)return Promise.resolve(w)}}this._connection();var n;"http"===this.connectionType&&("pb"===this.dataType||null!=this.compresser)&&(n={dataType:"arraybuffer"});var m=e._generateQid(),g=this._requestParams(m,t,d),v=new y(m,p,u,d,t);return this.requestQueue[m]=v,r&&v.callbacks.push(r),Promise.resolve(this.token||this.tokenManager&&this.tokenManager.getToken()).then(function(e){e&&("ws"===o.connectionType&&o.conn._address.indexOf("token=")<0?o.conn._address=o.conn._address+"?token="+e:"http"===o.connectionType&&(g=g+"&token="+e))})["catch"](function(e){console.warn("Request token fail")}).then(function(){v.start=function(){o.requestQueue[v.qid]===v&&o.conn.request(s+"?"+g,n)},v.start()}),v}},{key:"request",value:function(e,t){return this.query(e,f.extend(t,{subscribe:!1,request:!0}))}},{key:"subscribe",value:function(e,t,n){return"function"==typeof t?(n=t,t={}):t=t||{},this.query(e,f.extend(t,{subscribe:!0}),n)}},{key:"_cancelRequest",value:function(e){"ws"===this.connectionType&&this.conn&&this.conn.getStatus()===WebSocket.OPEN&&this.conn.request("/cancel?"+f.param({qid:e}))}},{key:"cancel",value:function(e){var t=this;if("number"==typeof e){var n=e;this._cancelRequest(n),delete this.requestQueue[n]}else{var r=this.requestQueue,o=Object.keys(r);o.forEach(function(n){var o=r[n];e&&o.key!==e||(t._cancelRequest(n),delete r[n])})}}},{key:"reset",value:function(e){this.cancel(),f.extend(this,e),this.cache={},this.requestQueue={},this.conn=null}}]),e}();n["default"]=v,v.address=null,v.datatype="pb",v.pushInterval=5e3,v.pause=!1,t.exports=n["default"]},{"./dzhyun/DzhyunDataParser":4,"./dzhyun/DzhyunTokenManager":5,"./util":13,"html5-connection":16}],4:[function(e,t,n){(function(r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var f=Object.getPrototypeOf(o);if(null===f)return;e=f,t=i,n=a,r=!0,u=f=void 0}},f=e("../DataParser"),c=o(f),l=e("./parser"),p=o(l),d=e("./adapter/MSGAdapter"),h=o(d),y=e("./adapter/MSGDirectAdapter"),v=o(y),b=e("./pbTable"),_=o(b),w=e("html5-yfloat"),m=o(w),g={_default:new h["default"],_direct:new v["default"],news:new v["default"]},T=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.service=e}return a(t,e),u(t,[{key:"parseUAResponse",value:function(e,t){return void 0===e&&(e=null),p["default"].parse(t,"UAResponse",e)}},{key:"parseMsg",value:function(e){return this._adapter(p["default"].parse(e,"MSG"))}},{key:"parse",value:function(e,t){var n=this;return void 0===e&&(e=null),new Promise(function(r,o){var i=n.parseUAResponse(e,t);t=i.Data,0!==i.Err?o({qid:i.Qid,error:t?"string"==typeof t?t:t.toUTF8?t.toUTF8():JSON.stringify(t):"unknown error"}):r({qid:i.Qid,data:n.parseMsg(t)})})}},{key:"_adapter",value:function(e){var t=this;if(!e)return e;var n=this.direct?g._direct:g._default;if(this.service){var r=Object.keys(g);r.some(function(e){return t.service.indexOf(e)>=0?(n=g[e],!0):void 0})}return n.adapt(e)}}]),t}(c["default"]);n["default"]=T,T.prototype.direct=!1,T.parser=p["default"],T.MSGAdapter=h["default"],T.pbTable=_["default"],T.yfloat=m["default"];var E=r||void 0;E.DzhyunDataParser=T,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../DataParser":2,"./adapter/MSGAdapter":7,"./adapter/MSGDirectAdapter":8,"./parser":10,"./pbTable":11,"html5-yfloat":25}],5:[function(e,t,n){(function(r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("html5-connection"),f=i(s),c=e("../util"),l=o(c),p=e("./DzhyunDataParser"),d=i(p),h=function(){function e(t,n,r){a(this,e),this.address=t,this.params=n,this.refreshSecond=r}return u(e,[{key:"_request",value:function(e,t){var n=this;return new Promise(function(r,o){f["default"].http(n.address,{},{response:r,error:o}).request(e+"?"+l.param(t))}).then(function(t){return new d["default"](e).parse(null,t)}).then(function(e){if(e=e.data[0],0==e.result)return e;throw e})}},{key:"access",value:function(e){return this._request("/token/access",e)}},{key:"refresh",value:function(e){return this._request("/token/refresh",e)}},{key:"getToken",value:function(){var e=this;return this._promise||(this._promise=Promise.resolve(this._token||this.access(this.params).then(function(t){return e._token=t.token,e._promise=null,e._refreshToken(t),e._token})))}},{key:"_refreshToken",value:function(e){var t=this,n=parseInt(e.duration),r=this.refreshSecond;0!==r&&(r=r||Math.max(n-60,10),this._refreshTimeout&&clearTimeout(this._refreshTimeout),this._refreshTimeout=setTimeout(function(){t._refreshTimeout=null,t.access(t.params).then(function(e){t._token=e.token,t._promise=null,t._refreshToken(e)})["catch"](function(){t._token=null,t._promise=null})},1e3*r))}}]),e}();n["default"]=h;var y=r||void 0;y.DzhyunTokenManager=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13,"./DzhyunDataParser":4,"html5-connection":16}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"adapt",value:function(){}}]),e}();n["default"]=i,t.exports=n["default"]},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var f=Object.getPrototypeOf(o);if(null===f)return;e=f,t=i,n=a,r=!0,u=f=void 0}},s=e("../pbTable"),f=r(s),c=e("../jsonTable"),l=r(c),p=e("./BaseDataAdapter"),d=r(p),h=e("html5-yfloat"),y=r(h),v=e("../protobuf"),b=r(v),_=b["default"].Long,w=["Id","Obj","ObjCount"],m=function(e){function t(){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"parseYFloat",value:function(e){var t=this;if(e){if("number"==typeof e||e instanceof _)return y["default"].unmakeValueToNumber(e);if(e instanceof Array){var n=[];return e.forEach(function(e){n.push(t.parseYFloat(e))}),n}if("object"==typeof e){var r=Object.keys(e);return r.forEach(function(n){e[n]=t.parseYFloat(e[n])}),e}return e}return e}},{key:"adapt",value:function(e){var t,n=e._isPb;if(null!=e.Tbl)t=f["default"].convertToJsonArray(e.Tbl,{filter:function(e,t){if("number"==typeof e||e instanceof _){if(n&&void 0!==t){var r=t.previousValue,o=t.dq;if(void 0===o){var i=y["default"].unmakeValue(e);return o=t.dq=i[1],t.previousValue=i[0]}e instanceof _&&(e=e.toNumber());var a=Math.pow(10,o);return t.previousValue=Number((r*a+e).toFixed())/a}return n?y["default"].unmakeValueToNumber(e):e}return!0}}),t=t[0],t=t[Object.keys(t)[0]];else if(null!=e.JsonTbl)t=l["default"].convertToJsonArray(e.JsonTbl),t=t[0],t=t[Object.keys(t)[0]];else{var r=Object.keys(e).sort(function(e,t){return 0===e.indexOf("RepData")?-1:0===t.indexOf("RepData")?1:0});r.some(function(n){var r=e[n];return w.indexOf(n)<0&&null!==r&&(!(r instanceof Array)||r.length>0)?(t=r,!0):void 0}),n===!0&&(t=this.parseYFloat(t))}return this.format(t,e.Obj)}},{key:"format",value:function(e,t){var n=e;return n instanceof Array?n.length>0&&n[0].hasOwnProperty("Obj")&&(n={},e.forEach(function(e){n[e.Obj]=e.Data||e})):null!==t&&(n={},n[t]=e),n}}]),t}(d["default"]);n["default"]=m,t.exports=n["default"]},{"../jsonTable":9,"../pbTable":11,"../protobuf":12,"./BaseDataAdapter":6,"html5-yfloat":25}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var f=Object.getPrototypeOf(o);if(null===f)return;e=f,t=i,n=a,r=!0,u=f=void 0}},s=e("./MSGAdapter"),f=r(s),c=function(e){function t(){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"format",value:function(e){return e}}]),t}(f["default"]);n["default"]=c,t.exports=n["default"]},{"./MSGAdapter":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e){if(!e||!e.head)return e;var t=e.head,n=e.data;return n.map(function(e){var n={};return e.forEach(function(e,r){n[t[r]]=o(e)}),n})};n["default"]={convertToJsonArray:r},t.exports=n["default"]},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dzhyun"),i=r(o),a=e("./protobuf"),u=r(a),s=e("snappyjs"),f=r(s),c=u["default"].ByteBuffer;n["default"]={stringToArrayBuffer:function(e){for(var t=e.length,n=new ArrayBuffer(2*t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n},arrayBufferToString:function(e){var t=new Uint8Array(e),n=t.length;if(n>65535){var r=0,o=[];do{var i=t.subarray(r,r+=65535);o.push(String.fromCharCode.apply(null,i))}while(n>r);return decodeURIComponent(escape(o.join("")))}return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},parseProtoBuf:function(e,t){var n=i["default"][t].decode(e);return n&&(n._isPb=!0),n},isBuffer:function(e){return e.constructor&&"Buffer"===e.constructor.name},parse:function(e,t,n){if("snappy"===n)try{"string"==typeof e?(e=this.stringToArrayBuffer(e),e=f["default"].uncompress(e),e=this.arrayBufferToString(e)):e=f["default"].uncompress(e)}catch(r){console.warn("uncompress fail",r)}var o=e;try{if(!e)return e;if("string"==typeof e)try{o=JSON.parse(e)}catch(i){o=this.parseProtoBuf(this.stringToArrayBuffer(e),t)}else if(e instanceof ArrayBuffer)try{o=this.parseProtoBuf(e,t)}catch(i){o=JSON.parse(this.arrayBufferToString(e))}else if(this.isBuffer(e))try{o=this.parseProtoBuf(e,t)}catch(i){o=JSON.parse(e.toString("utf8"))}else e instanceof c&&(o=this.parseProtoBuf(e,t))}catch(i){console.warn(new Date+",Fail parse data ["+e+"]",i.message)}return o}},t.exports=n["default"]},{"./dzhyun":14,"./protobuf":12,snappyjs:32}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dzhyun"),i=r(o),a=e("./protobuf"),u=r(a),s=u["default"].ByteBuffer,f=i["default"].InfoType||{Type_Int:105,Type_Float:102,Type_Double:100,Type_String:115,Type_Binary:98,Type_Table:116,Type_SInt:120,Type_Unknow:0},c=i["default"].Table,l={};l[f.Type_Int]="i",l[f.Type_Float]="f",l[f.Type_Double]="d",l[f.Type_String]="s",l[f.Type_Binary]="b",l[f.Type_Table]="t",l[f.Type_SInt]="x";var p={},d=function(e){this.options=e||{},this._tableInfoStack=[]};d.prototype={_pbTableDecode:function(e){return e instanceof ArrayBuffer||e instanceof s?c.decode(e):e},_getColumnDataValues:function(e,t){if(t!==f.Type_Unknow){var n=l[t]+"Values";return e[n]}return e.iValues||e.fValues||e.dValues||e.sValues||e.bValues||e.tValues||e.xValues},_retrieveValue:function(e,t,n,r){return t==f.Type_Table&&(e=this.convert(e,0===r)),0===r||t!=f.Type_Int&&t!=f.Type_SInt||!n||(e*=n),e},_convertColumn:function(e,t,n){var r=e.Index;t=t||{};var o=t.Name||r,i=t.Type||f.Type_Unknow,a=t.Ratio,u=this._getColumnDataValues(e,i);if(null==u)throw new Error("column["+r+"] data is null");this._columnToRow(u,r,o,i,a,n)},_columnToRow:function(e,t,n,r,o,i){var a={previousValue:0,dq:void 0};e.forEach(function(e,t){var u=i[t];if(void 0===u&&(u={},i.push(u)),e=this._retrieveValue(e,r,o,t),"function"==typeof this.options.filter){var s=this.options.filter(e,r==f.Type_SInt?a:void 0);s===!1||(s===!0||void 0===s?u[n]=e:e=u[n]=s)}else u[n]=e}.bind(this)),this._tableInfoStack.pop()},convert:function(e,t){var n=this._pbTableDecode(e),r=n.Tiid,o=n.Info;if(o&&0!==o.length)t===!0?this._tableInfoStack.push(o):null,p[r]=o;else{var i=this._tableInfoStack.length;o=t===!1&&i>0?this._tableInfoStack[i]:p[r]}var a=[],u=n.Data||n.DataX;if(!u)throw new Error("table data undefined");return u.forEach(function(e){var t=e.Index,n=o?o[t]:null;this._convertColumn(e,n,a)}.bind(this)),a}},n["default"]={convertToJsonArray:function(e,t){return new d(t).convert(e)},convertToJsonTable:function(e,t){var n=new d(t);return n._columnToRow=function(e,t,n,r,o,i){var a=0;e.forEach(function(e,t){var n=i[t];void 0===n&&(n=[],i.push(n)),a=this._retrieveValue(e,a,r,o),n.push(a)}.bind(this))},n.convert(e)}},t.exports=n["default"]},{"./dzhyun":14,"./protobuf":12}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o;try{o=e("protobufjs")}catch(i){o="undefined"!=typeof dcodeIO&&dcodeIO.ProtoBuf}o||(o={},o.Long=function a(){r(this,a)},o.ByteBuffer=function u(){r(this,u)}),n["default"]=o,t.exports=n["default"]},{protobufjs:"protobufjs"}],13:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e){0===e.indexOf("?")&&(e=e.substring(1));var t,n,r=e.split("&"),o={};for(n in r)""!==r[n]&&(t=r[n].split("="),o[decodeURIComponent(t[0])]=decodeURIComponent(t.slice(1).join("=")));return o}Object.defineProperty(n,"__esModule",{value:!0}),n.unParam=i;var a=e("html5-connection/lib/util");o(n,r(a,o))},{"html5-connection/lib/util":24}],14:[function(e,t,n){},{}],15:[function(e,t,n){function r(){c=!1,u.length?f=u.concat(f):l=-1,f.length&&o()}function o(){if(!c){var e=setTimeout(r);c=!0;for(var t=f.length;t;){for(u=f,f=[];++l<t;)u&&u[l].run();l=-1,t=f.length}u=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var u,s=t.exports={},f=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new i(e,t)),1!==f.length||c||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],16:[function(e,t,n){e("./lib/HttpConnection"),e("./lib/WebSocketConnection"),t.exports=e("./lib/connection")},{"./lib/HttpConnection":18,"./lib/WebSocketConnection":20,"./lib/connection":23}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o,i){r(this,e),this._address=t,this.options=n||{},"boolean"==typeof o?(this._secure=o,this._handler=null):(this._secure=i||!1,this._handler=o),this._protocol="http",this._listenerMap={}}return o(e,[{key:"getAddress",value:function(){return this.getProtocol()+"://"+this._address.replace(/^(\w+:\/\/)?/,"")}},{key:"getProtocol",value:function(){return this._protocol+(this._secure?"s":"")}},{key:"request",value:function(e,t){}},{key:"send",value:function(e,t){this.request(e,t)}},{key:"close",value:function(){}},{key:"on",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]);n.indexOf(t)<0&&n.push(t)}return this}},{key:"off",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]),r=n.indexOf(t);r>=0&&n.splice(r,1)}return this}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];var i=this._listenerMap[e];return i&&i.forEach(function(e){return e.apply(t,r)}),this._handler&&"function"==typeof this._handler[e]&&this._handler[e].apply(this._handler,r),this}}]),e}();i.EVENT_OPEN="open",i.EVENT_CLOSE="close",i.EVENT_ERROR="error",i.EVENT_REQUEST="request",i.EVENT_SEND="send",i.EVENT_RESPONSE="response",i.EVENT_MESSAGE="message",i.EVENT_PROGRESS="progress",n["default"]=i,t.exports=n["default"]},{}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;u=f=s=void 0,r=!1;var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var f=Object.getPrototypeOf(o);if(null===f)return;e=f,t=i,n=a,r=!0}},s=e("./connection"),f=r(s),c=e("./BaseConnection"),l=r(c),p=e("./util"),d=e("./ajax"),h=r(d),y=function(e){function t(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this._request=[]}return i(t,e),a(t,[{key:"request",value:function(e,t){var n=this;t=(0,p.extend)({},this.options,t),t.success=function(e,t,r){n.trigger(l["default"].EVENT_MESSAGE,e),n.trigger(l["default"].EVENT_RESPONSE,e)},t.error=function(e,t,r){n.trigger(l["default"].EVENT_ERROR,r)},t.complete=function(){var e=n._request.indexOf(r);n._request.splice(e,1)},t.url=this.getAddress()+(e?e:"");var r=(0,h["default"])(t);return r&&(r.onreadystatechange=function(e){return function(){2===r.readyState&&(n.trigger(l["default"].EVENT_SEND),n.trigger(l["default"].EVENT_REQUEST)),e&&e()}}(r.onreadystatechange)),this.trigger(l["default"].EVENT_OPEN),this._request.push(r),r.onprogress=function(e){n.trigger(l["default"].EVENT_PROGRESS,e)},this}},{key:"close",value:function(){var e=this;return this._request.forEach(function(t,n){t.abort(),e._request.splice(n,1)}),this.trigger(l["default"].EVENT_CLOSE),this}}]),t}(l["default"]);n["default"]=y,f["default"].http=function(e,t,n){return new y(e,t,n,!1)},f["default"].https=function(e,t,n){return new y(e,t,n,!0)},t.exports=n["default"]},{"./BaseConnection":17,"./ajax":22,"./connection":23,"./util":24}],19:[function(e,t,n){"use strict";if("undefined"!=typeof window)window.WebSocket?t.exports=window.WebSocket:console.log("当前浏览器不支持WebSocket");else if("undefined"!=typeof WebSocket)t.exports=WebSocket;else{var r="ws";t.exports=e(r)}},{}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;u=f=s=void 0,r=!1;var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var f=Object.getPrototypeOf(o);if(null===f)return;e=f,t=i,n=a,r=!0}},s=e("./connection"),f=r(s),c=e("./BaseConnection"),l=r(c),p=e("./WebSocket"),d=r(p),h=function(e){
function t(e,n,r){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this._protocol="ws",this._ws=null;var i=n&&n.deferred===!0||!1;i===!1&&this._connect()}return i(t,e),a(t,[{key:"getStatus",value:function(){return this._ws?this._ws.readyState:d["default"].CLOSED}},{key:"_connect",value:function(){var e=this;if("undefined"==typeof d["default"])throw Error("Don't support WebSocket");this._ws=new d["default"](this.getAddress()),void 0===d["default"].OPEN&&(d["default"].CONNECTING=this._ws.CONNECTING,d["default"].OPEN=this._ws.OPEN,d["default"].CLOSING=this._ws.CLOSING,d["default"].CLOSED=this._ws.CLOSED),this._ws.binaryType=this.options.binaryType||this.options.dataType||"arraybuffer",this._ws.addEventListener("open",function(){e.trigger(l["default"].EVENT_OPEN)}),this._ws.addEventListener("error",function(){e.trigger(l["default"].EVENT_ERROR)}),this._ws.addEventListener("close",function(){e.trigger(l["default"].EVENT_CLOSE)}),this._ws.addEventListener("message",function(t){e.trigger(l["default"].EVENT_MESSAGE,t.data),e.trigger(l["default"].EVENT_RESPONSE,t.data)})}},{key:"request",value:function(e,t){var n=this;return e=e||"",this.getStatus()===d["default"].CLOSED&&this._connect(),this.getStatus()!==d["default"].OPEN?this._ws.addEventListener("open",function(){n._ws.send(e),n.trigger(l["default"].EVENT_SEND),n.trigger(l["default"].EVENT_REQUEST)}):(this._ws.send(e),this.trigger(l["default"].EVENT_SEND),this.trigger(l["default"].EVENT_REQUEST)),this}},{key:"close",value:function(){return this.getStatus()!==d["default"].CLOSED&&(this._ws.close(),this._ws=null),this}}]),t}(l["default"]);n["default"]=h,f["default"].ws=function(e,t,n){return new h(e,t,n,!1)},f["default"].wss=function(e,t,n){return new h(e,t,n,!0)},t.exports=n["default"]},{"./BaseConnection":17,"./WebSocket":19,"./connection":23}],21:[function(e,t,n){"use strict";if("undefined"!=typeof window)window.XMLHttpRequest?t.exports=window.XMLHttpRequest:console.log("当前浏览器不支持XMLHttpRequest");else if("undefined"!=typeof XMLHttpRequest)t.exports=XMLHttpRequest;else{var r="xhr2",o=e(r);t.exports=o.XMLHttpRequest||o}},{}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0})}function i(e){if("undefined"==typeof ArrayBuffer)throw new Error("不支持ArrayBuffer类型");if(e.response instanceof ArrayBuffer)return e.response;for(var t=e.responseText,n=t.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;n>i;i++)o[i]=255&t.charCodeAt(i);return r}function a(e){if("undefined"==typeof Blob)throw new Error("不支持Blob类型");if(e.response instanceof Blob)return e.response;var t=i(e);return new Blob([t])}var u=e("./XMLHttpRequest"),s=r(u),f=e("./util");if("undefined"!=typeof $&&"function"==typeof $.ajax&&"undefined"==typeof XDomainRequest){var c=function(e,t,n){return{send:function(t,n){var r,u,s,f;f=e.xhr(),s=e.url,u=e.type,r=e.data||null,f.onload=function(){var t="arraybuffer"===e.dataType?i(f):a(f),r=o({},e.dataType,t);return n(f.status,f.statusText,r,f.getAllResponseHeaders())},f.onerror="error",function(e){return n(-1,e)},f.ontimeout=function(e){return n(-1,e)},f.open(u,s,!0);var c="string"==typeof f.responseType;c?f.responseType=e.dataType:f.overrideMimeType?f.overrideMimeType("text/plain; charset=x-user-defined"):f.setRequestHeader("Accept-Charset","x-user-defined");for(var l in t)f.setRequestHeader(l,t[l]);return f.send(r)},abort:function(){return n.abort()}}},l=$.ajaxSettings.xhr;$.support.cors=!0,$.ajaxSetup({xhr:function O(){var O=l.call(this);return this.setXHR(O),O},beforeSend:function(e,t){t.setXHR=function(t){t.abort=e.abort,e.xhr=t}},crossDomain:!0}),$.ajaxTransport("+arraybuffer",c),$.ajaxTransport("+blob",c),t.exports=function(){var e=$.ajax.apply($,[].slice.call(arguments));return e.xhr}}else{var p,d,h,y,v,b,_,w,m,g,T,E;!function(){var e=function(e,t,n){return!0},n=function(t,n,r,o){return t.global?e(n||h,r,o):void 0},r=function(e){e.global&&0===E.active++&&n(e,null,"ajaxStart")},o=function(e){e.global&&!--E.active&&n(e,null,"ajaxStop")},u=function(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||n(t,r,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,r,"ajaxSend",[e,t])},c=function(e,t,r){var o=r.context,i="success";r.success.call(o,e,i,t),n(r,o,"ajaxSuccess",[t,r,e]),O(i,t,r)},l=function(e,t,r,o){var i=o.context;o.error.call(i,r,t,e),n(o,i,"ajaxError",[r,o,e]),O(t,r,o)},O=function(e,t,r){var i=r.context;r.complete.call(i,t,e),n(r,i,"ajaxComplete",[t,r]),o(r)},k=function(){},j=function(e){return e&&(e==g?"html":e==m?"json":_.test(e)?"script":w.test(e)&&"xml")||"text"},x=function(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")},S=function(e){"object"==typeof e.data&&(e.data=(0,f.param)(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=x(e.url,e.data))};p=0,d="undefined"==typeof window,h=!d&&window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,m="application/json",g="text/html",T=/^\s*$/,E=t.exports=function(e){var t=(0,f.extend)({},e||{});for(y in E.settings)void 0===t[y]&&(t[y]=E.settings[y]);r(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&!d&&!!window.location&&RegExp.$2!=window.location.host);var n=t.dataType,o=/=\?/.test(t.url);if("jsonp"==n||o)return o||(t.url=x(t.url,"callback=?")),E.JSONP(t);t.url||(t.url=!d&&!!window.location&&window.location.toString()),S(t);var s,p=t.accepts[n],h={},b=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:!d&&!!window.location&&window.location.protocol,_=E.settings.xhr();t.crossDomain?"undefined"!=typeof XDomainRequest&&(_=new XDomainRequest,_.onload=function(){_.readyState=4,_.status=200,_.onreadystatechange()},_.error=function(){_.readyState=4,_.status=400,_.onreadystatechange()}):h["X-Requested-With"]="XMLHttpRequest",p&&(h.Accept=p,p.indexOf(",")>-1&&(p=p.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(p)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(h["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=(0,f.extend)(h,t.headers||{}),_.onreadystatechange=function(){if(4==_.readyState){clearTimeout(s);var e,r=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==b){n=n||j(_.contentType||_.getResponseHeader&&_.getResponseHeader("content-type"));try{"script"==n?(1,eval)(e):e="xml"==n?_.responseXML:"json"==n?T.test(_.responseText)?null:JSON.parse(_.responseText):"arraybuffer"===n?i(_):"blob"===n?a(_):_.responseText}catch(o){r=o}r?l(r,"parsererror",_,t):c(e,_,t)}else l(null,"error",_,t)}};var w="async"in t?t.async:!0;if(_.open(t.type,t.url,w),"arraybuffer"==n||"blob"==n){var m="string"==typeof _.responseType;m?_.responseType=e.dataType:_.overrideMimeType?_.overrideMimeType("text/plain; charset=x-user-defined"):_.setRequestHeader("Accept-Charset","x-user-defined")}for(v in t.headers)_.setRequestHeader(v,t.headers[v]);return u(_,t)===!1?(_.abort(),!1):(t.timeout>0&&(s=setTimeout(function(){_.onreadystatechange=k,_.abort(),l(null,"timeout",_,t)},t.timeout)),_.send(t.data?t.data:null),_)},E.active=0,E.JSONP=function(e){if(!("type"in e))return E(e);var t,n="jsonp"+ ++p,r=h.createElement("script"),o=function(){!d&&n in window&&(window[n]=k),O("abort",i,e)},i={abort:o},a=h.getElementsByTagName("head")[0]||h.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error()}),d||(window[n]=function(r){clearTimeout(t),delete window[n],c(r,i,e)}),S(e),r.src=e.url.replace(/=\?/,"="+n),a.insertBefore(r,a.firstChild),e.timeout>0&&(t=setTimeout(function(){i.abort(),O("timeout",i,e)},e.timeout)),i},E.settings={type:"GET",beforeSend:k,success:k,error:k,complete:k,context:null,global:!0,xhr:function(){return new s["default"]},accepts:{script:"text/javascript, application/javascript",json:m,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0},E.get=function(e,t){return E({url:e,success:t})},E.post=function(e,t,n,r){return"function"==typeof t&&(r=r||n,n=t,t=null),E({type:"POST",url:e,data:t,success:n,dataType:r})},E.getJSON=function(e,t){return E({url:e,success:t,dataType:"json"})}}()}},{"./XMLHttpRequest":21,"./util":24}],23:[function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t,n){if("string"!=typeof e)throw new Error("url is incorrect");var i=/^((\w+):\/\/)?(.*)/.exec(e),a=r(i,4),u=a[2],s=void 0===u?"http":u,f=a[3],c=o[s];if(!c)throw new Error('protocol "'+s+'" no support');return c(f,t,n)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o,t.exports=n["default"]},{}],24:[function(e,t,n){"use strict";function r(e,t,n,o){var i=t instanceof Array;for(var a in t){var u=t[a];o&&(a=n?o:o+"["+(i?"":a)+"]"),!o&&i?e.add(u.name,u.value):(n?u instanceof Array:"object"==typeof u)?r(e,u,n,a):e.add(a,u)}}function o(e,t){var n=[];return n.add=function(e,t){this.push(a(e)+"="+a(t))},r(n,e,t),n.join("&").replace("%20","+")}function i(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e}Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=r,n.param=o,n.extend=i;var a=encodeURIComponent},{}],25:[function(e,t,n){function r(e){return e/c|0}function o(e){return e%c|0}function i(e,t){return(t>>>0)*c+(e>>>0)}function a(e){var t,n;if("number"==typeof e&&e>0)t=r(e),n=o(e);else{if(!e||"function"!=typeof e.getHighBits||"function"!=typeof e.getLowBits)return console.warn("unmakeValue: invalid value"),[NaN,0];t=e.getHighBits(),n=e.getLowBits()}var a=n>>16&255,u=15&a,s=a>>4&15,f=i((t<<24)+(n>>>24<<16)+(65535&n),t>>8),c=[2,1,null,3,4,5,6,7,8,9,0][u],l=null!=c?f/(Math.pow(10,c)||1):NaN;return 0!=s&&(l=-l),[l,c]}function u(e){return a(e)[0]}function s(e){var t=a(e),n=t[0],r=t[1];return null!==r?n.toFixed(r):n.toString()}var f=65536,c=f*f;t.exports={unmakeValue:a,unmakeValueToNumber:u,unmakeValueToString:s}},{}],26:[function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(t){return v=t,b}}function i(e,t){try{return e(t)}catch(n){return v=n,b}}function a(e,t,n){try{e(t,n)}catch(r){return v=r,b}}function u(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&h(e,this)}function s(e,t,n){return new e.constructor(function(o,i){var a=new u(r);a.then(o,i),f(e,new d(t,n,a))})}function f(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void y(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?c(t.promise,e._12):l(t.promise,e._12));var r=i(n,e._12);r===b?l(t.promise,v):c(t.promise,r)})}function c(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=o(t);if(n===b)return l(e,v);if(n===e.then&&t instanceof u)return e._37=3,e._12=t,void p(e);if("function"==typeof n)return void h(n.bind(t),e)}e._37=1,e._12=t,p(e)}function l(e,t){e._37=2,e._12=t,p(e)}function p(e){for(var t=0;t<e._59.length;t++)f(e,e._59[t]);e._59=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1,r=a(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,l(t,e))});n||r!==b||(n=!0,l(t,v))}var y=e("asap/raw"),v=null,b={};t.exports=u,u._99=r,u.prototype.then=function(e,t){if(this.constructor!==u)return s(this,e,t);var n=new u(r);return f(this,new d(e,t,n)),n}},{"asap/raw":29}],27:[function(e,t,n){"use strict";function r(e){var t=new o(o._99);return t._37=1,t._12=e,t}var o=e("./core.js");t.exports=o;var i=r(!0),a=r(!1),u=r(null),s=r(void 0),f=r(0),c=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return u;if(void 0===e)return s;if(e===!0)return i;if(e===!1)return a;if(0===e)return f;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(a,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof o&&u.then===o.prototype.then){for(;3===u._37;)u=u._12;return 1===u._37?r(a,u._12):(2===u._37&&n(u._12),void u.then(function(e){r(a,e)},n))}var s=u.then;if("function"==typeof s){var f=new o(s.bind(u));return void f.then(function(e){r(a,e)},n)}}t[a]=u,0===--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,a=0;a<t.length;a++)r(a,t[a])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":26}],28:[function(e,t,n){"use strict";function r(){if(s.length)throw s.shift()}function o(e){var t;t=u.length?u.pop():new i,t.task=e,a(t)}function i(){this.task=null}var a=e("./raw"),u=[],s=[],f=a.makeRequestCallFromTimer(r);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(s.push(e),f())}finally{this.task=null,u[u.length]=this}}},{"./raw":29}],29:[function(e,t,n){(function(e){"use strict";function n(e){u.length||(a(),s=!0),u[u.length]=e}function r(){for(;f<u.length;){var e=f;if(f+=1,u[e].call(),f>c){for(var t=0,n=u.length-f;n>t;t++)u[t]=u[t+f];u.length-=f,f=0}}u.length=0,f=0,s=!1}function o(e){var t=1,n=new l(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var a,u=[],s=!1,f=0,c=1024,l=e.MutationObserver||e.WebKitMutationObserver;a="function"==typeof l?o(r):i(r),n.requestFlush=a,n.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],31:[function(e,t,n){e("asap");"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":26,"./lib/es6-extensions.js":27,"./polyfill-done.js":30,asap:28}],32:[function(e,t,n){(function(t,r){"use strict";function o(){return"object"==typeof t&&"object"==typeof t.versions&&"undefined"!=typeof t.versions.node?!0:!1}function i(e){return e instanceof Uint8Array&&(!c||!r.isBuffer(e))}function a(e){return e instanceof ArrayBuffer}function u(e){return c?r.isBuffer(e):!1}function s(e){if(!i(e)&&!a(e)&&!u(e))throw new TypeError(d);var t=!1,n=!1;i(e)?t=!0:a(e)&&(n=!0,e=new Uint8Array(e));var o=new l(e),s=o.readUncompressedLength();if(-1===s)throw new Error("Invalid Snappy bitstream");var f,c;if(t){if(f=new Uint8Array(s),!o.uncompressToBuffer(f))throw new Error("Invalid Snappy bitstream")}else if(n){if(f=new ArrayBuffer(s),c=new Uint8Array(f),!o.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(f=new r(s),!o.uncompressToBuffer(f))throw new Error("Invalid Snappy bitstream");return f}function f(e){if(!i(e)&&!a(e)&&!u(e))throw new TypeError(d);var t=!1,n=!1;i(o)?t=!0:a(e)&&(n=!0,e=new Uint8Array(e));var o,s,f,c=new p(e),l=c.maxCompressedLength();return t?(o=new Uint8Array(l),f=c.compressToBuffer(o)):n?(o=new ArrayBuffer(l),s=new Uint8Array(o),f=c.compressToBuffer(s)):(o=new r(l),f=c.compressToBuffer(o)),o.slice(0,f)}var c=o(),l=e("./snappy_decompressor").SnappyDecompressor,p=e("./snappy_compressor").SnappyCompressor,d="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";n.uncompress=s,n.compress=f}).call(this,e("_process"),e("buffer").Buffer)},{"./snappy_compressor":33,"./snappy_decompressor":34,_process:15,buffer:14}],33:[function(e,t,n){"use strict";function r(e,t){return 506832829*e>>>t}function o(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function i(e,t,n){return e[t]===e[n]&&e[t+1]===e[n+1]&&e[t+2]===e[n+2]&&e[t+3]===e[n+3]}function a(e,t,n,r,o){var i;for(i=0;o>i;i++)n[r+i]=e[t+i]}function u(e,t,n,r,o){return 60>=n?(r[o]=n-1<<2,o+=1):256>n?(r[o]=240,r[o+1]=n-1,o+=2):(r[o]=244,r[o+1]=n-1&255,r[o+2]=n-1>>>8,o+=3),a(e,t,r,o,n),o+n}function s(e,t,n,r){return 12>r&&2048>n?(e[t]=1+(r-4<<2)+(n>>>8<<5),e[t+1]=255&n,t+2):(e[t]=2+(r-1<<2),e[t+1]=255&n,e[t+2]=n>>>8,t+3)}function f(e,t,n,r){for(;r>=68;)t=s(e,t,n,64),r-=64;return r>64&&(t=s(e,t,n,60),r-=60),s(e,t,n,r)}function c(e,t,n,a,s){for(var c=1;n>=1<<c&&y>=c;)c+=1;c-=1;var l=32-c;"undefined"==typeof v[c]&&(v[c]=new Uint16Array(1<<c));var p,d=v[c];for(p=0;p<d.length;p++)d[p]=0;var h,b,_,w,m,g,T,E,O,k,j,x,S=t+n,P=t,q=t,M=!0,A=15;if(n>=A)for(h=S-A,t+=1,_=r(o(e,t),l);M;){g=32,w=t;do{if(t=w,b=_,T=g>>>5,g+=1,w=t+T,t>h){M=!1;break}_=r(o(e,w),l),m=P+d[b],d[b]=t-P}while(!i(e,t,m));if(!M)break;s=u(e,q,t-q,a,s);do{for(E=t,O=4;S>t+O&&e[t+O]===e[m+O];)O+=1;if(t+=O,k=E-m,s=f(a,s,k,O),q=t,t>=h){M=!1;break}j=r(o(e,t-1),l),d[j]=t-1-P,x=r(o(e,t),l),m=P+d[x],d[x]=t-P}while(i(e,t,m));if(!M)break;t+=1,_=r(o(e,t),l)}return S>q&&(s=u(e,q,S-q,a,s)),s}function l(e,t,n){do t[n]=127&e,e>>>=7,e>0&&(t[n]+=128),n+=1;while(e>0);return n}function p(e){this.array=e}var d=16,h=1<<d,y=14,v=new Array(y+1);p.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},p.prototype.compressToBuffer=function(e){var t,n=this.array,r=n.length,o=0,i=0;for(i=l(r,e,i);r>o;)t=Math.min(r-o,h),i=c(n,o,t,e,i),o+=t;return i},n.SnappyCompressor=p},{}],34:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i;for(i=0;o>i;i++)n[r+i]=e[t+i]}function o(e,t,n,r){var o;for(o=0;r>o;o++)e[t+o]=e[t-n+o]}function i(e){this.array=e,this.pos=0}var a=[0,255,65535,16777215,4294967295];i.prototype.readUncompressedLength=function(){for(var e,t,n=0,r=0;32>r&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,t=127&e,t<<r>>>r!==t)return-1;if(n|=t<<r,128>e)return n;r+=7}return-1},i.prototype.uncompressToBuffer=function(e){for(var t,n,i,u,s=this.array,f=s.length,c=this.pos,l=0;c<s.length;)if(t=s[c],c+=1,0===(3&t)){if(n=(t>>>2)+1,n>60){if(c+3>=f)return!1;i=n-60,n=s[c]+(s[c+1]<<8)+(s[c+2]<<16)+(s[c+3]<<24),n=(n&a[i])+1,c+=i}if(c+n>f)return!1;r(s,c,e,l,n),c+=n,l+=n}else{switch(3&t){case 1:n=(t>>>2&7)+4,u=s[c]+(t>>>5<<8),c+=1;break;case 2:if(c+1>=f)return!1;n=(t>>>2)+1,u=s[c]+(s[c+1]<<8),c+=2;break;case 3:if(c+3>=f)return!1;n=(t>>>2)+1,u=s[c]+(s[c+1]<<8)+(s[c+2]<<16)+(s[c+3]<<24),c+=4}if(0===u||u>l)return!1;o(e,l,u,n),l+=n}return!0},n.SnappyDecompressor=i},{}]},{},[1])(1)});