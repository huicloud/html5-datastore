"undefined"==typeof ArrayBuffer&&(ArrayBuffer=function(){}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(["protobufjs"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DataStore=e()}}(function(){return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){(function(n){"undefined"==typeof Promise&&(n.Promise=e("promise")),t.exports=e("./lib/DataStore")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/DataStore":3,promise:27}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"parse",value:function(e){return Promise.reject("未实现")}}]),e}();n["default"]=i,t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./util"),c=o(s),f=e("./dzhyun/DzhyunDataParser"),l=r(f),p=e("./dzhyun/DzhyunTokenManager");r(p);try{u=e("connection")}catch(h){u=window.connection}var d=function(){function e(t,n,r,o,u){var a=this;i(this,e),this._promise=new Promise(function(e,t){a.resolve=e,a.reject=t}),this.qid=t,this.key=n,this.filter=r,this.subscribe=o,this.callbacks=[],this.queryObject=u}return a(e,[{key:"response",value:function(e){this.resolve(e),this.callbacks.forEach(function(t){t(e)})}},{key:"error",value:function(e){var t=new Error(e);this.reject(t),this.callbacks.forEach(function(e){e(t)})}},{key:"then",value:function(){var e;return(e=this._promise).then.apply(e,arguments)}},{key:"catch",value:function(){var e;return(e=this._promise)["catch"].apply(e,arguments)}}]),e}(),v=function(){function e(t){i(this,e),t=t||{},this.cacheEnable="undefined"==typeof t.cacheEnable?"auto":t.cacheEnable,this.address=t.address||this.constructor.address,this.dataType=t.dataType||this.constructor.dataType||"pb",this.serviceUrl=t.serviceUrl,this.connectionType=t.connectionType,this.alone=t.alone||!1,this.fields=t.fields,this.dataParser=t.dataParser||new l["default"](this.serviceUrl),this.otherParams=t.otherParams,this.conn=null,this.idProperty=t.idProperty||"obj",this.cache={},this.requestQueue={},this.token=t.token||this.constructor.token,this.tokenManager=t.tokenManager||this.constructor.tokenManager,this.pushInterval=t.pushInterval||this.constructor.pushInterval,e._datastores.push(this)}return a(e,null,[{key:"_generateQid",value:function(){return e._qid=(e._qid||0)+1}},{key:"cancel",value:function(){e._datastores.forEach(function(e){e.cancel()})}},{key:"_datastores",value:[],enumerable:!0}]),a(e,[{key:"_connection",value:function(){if(null===this.conn){var t,n=e._connMap=e._connMap||{},r=this.address;if(this.alone===!1&&(t=n[r]),!t){var o={deferred:!0};t=this.connectionType?u[this.connectionType](r,o):u(r,o),this.alone===!1&&(n[r]=t)}this.conn=t,this.connectionType=t._protocol,this.conn.on("open",this._open.bind(this)),this.conn.on("request",this._request.bind(this)),this.conn.on("response",this._response.bind(this)),this.conn.on("close",this._close.bind(this)),this.conn.on("error",this._error.bind(this))}}},{key:"_open",value:function(){}},{key:"_request",value:function(){}},{key:"_store",value:function(e){var t=this,n=Object.keys(e);n.forEach(function(n){var r=t.cache[n],o=e[n];o instanceof Array?(r=r||[],r.push.apply(r,o),t.cache[n]=r):t.cache[n]=o})}},{key:"_response",value:function(t){var n=this;this.dataParser.parse(t).then(function(t){var r=t.qid,o=t.data,i=n.requestQueue[r];if(i){n.cacheEnable&&n._store(o);var u=o;if(i.filter&&(u=n._filter(o,i.filter)),i.response(u),i.subscribe!==!0)delete n.requestQueue[r];else if("http"===n.connectionType){var a=function s(){setTimeout(function(){e.pause===!0?s():i.start&&i.start()},n.pushInterval)};a()}}})["catch"](function(e){var t=e.qid,r=e.error,o=n.requestQueue[t];o&&(o.error(r),o.subscribe!==!0&&delete n.requestQueue[t])})}},{key:"_close",value:function(){var e=this.requestQueue,t=Object.keys(e);t.forEach(function(t){var n=e[t];n.error("connection close")}),this.conn=null,this.cancel()}},{key:"_error",value:function(){var e=this.requestQueue,t=Object.keys(e);t.forEach(function(t){var n=e[t];n.error("request error")})}},{key:"_queryCache",value:function(e,t){if(this.cacheEnable===!1)return!1;var n;if(e){var n=this.cache[e];return n?this._filter(n,t):!1}return this._filter(this.cache,t)}},{key:"_filter",value:function(e,t){var n=e instanceof Array?e:[e];if("function"==typeof t)return n.filter(t);if("string"==typeof t)return JSONSelect.match(t,n);if("object"==typeof t){var r=[],o=Object.keys(t);return o.forEach(function(e){var n=t[e];r.push(":has(."+e+":expr(x"+n+"))")}),r=r.join(""),n.filter(function(e){return JSONSelect.match(r,e).length>0})}return e}},{key:"_requestParams",value:function(e,t,n){var r={qid:e,sub:n&&"ws"===this.connectionType?1:0,output:this.dataType},o=this._requestFieldStr();return o?r.field=o:null,c.param(c.extend(r,t,this.otherParams))}},{key:"_requestFieldStr",value:function(){return this.fields?this.fields instanceof Array?this.fields.join(","):"object"==typeof this.fields?Object.keys(this.fields).join(","):this.fields:null}},{key:"query",value:function(t,n,r){var o=this,i=n||{},u=i.filter;if(!t)return u?Promise.resolve(this._queryCache(null,u)):Promise.reject(new Error("query object is null"));"string"==typeof t&&(t=c.unParam(t));var a=t[this.idProperty],s=i.subscribe||!1,f=i.request;i.partial!==!1;if(a instanceof Array&&(t[this.idProperty]=a.join(",")),a&&f!==!0){var l,p=Object.keys(this.requestQueue);if(p.some(function(e){var t=o.requestQueue[e];return t.key&&t.key.toString()===a.toString()?(r&&t.callbacks.push(r),l=t,!0):void 0}))return l;if(s!==!0&&this.cacheEnable!==!1){var h=a;"string"==typeof h&&(h=h.split(",").map(function(e){return e.trim()}));var v=[];if(h.every(function(e){var t=o._queryCache(e,u);return t!==!1?(v[e]=t,!0):!1})===!0)return Promise.resolve(v)}}this._connection();var n;"http"===this.connectionType&&"pb"===this.dataType&&(n={dataType:"arraybuffer"});var y=e._generateQid(),b=this._requestParams(y,t,s),l=new d(y,a,u,s,t);return this.requestQueue[y]=l,r&&l.callbacks.push(r),Promise.resolve(this.token||this.tokenManager&&this.tokenManager.getToken()).then(function(e){e&&("ws"===o.connectionType&&o.conn._address.indexOf("token=")<0?o.conn._address=o.conn._address+"?token="+e:"http"===o.connectionType&&(b=b+"&token="+e)),l.start=function(){o.conn.request(o.serviceUrl+"?"+b,n)},l.start()})["catch"](function(e){l.start=function(){o.conn.request(o.serviceUrl+"?"+b,n)},l.start()}),l}},{key:"request",value:function(e,t){return this.query(e,c.extend(t,{subscribe:!1,request:!0}))}},{key:"subscribe",value:function(e,t,n){return"function"==typeof t?(n=t,t={}):t=t||{},this.query(e,c.extend(t,{subscribe:!0}),n)}},{key:"_cancelRequest",value:function(e){"ws"===this.connectionType&&this.conn&&this.conn.request("/cancel?"+c.param({qid:e}))}},{key:"cancel",value:function(e){var t=this;if("number"==typeof e){var n=e;this._cancelRequest(n),delete this.requestQueue[n]}else{var r=this.requestQueue,o=Object.keys(r);o.forEach(function(n){var o=r[n];e&&o.key!==e||(t._cancelRequest(n),delete o.start,delete r[n])})}}},{key:"reset",value:function(e){this.cancel(),c.extend(this,e),this.cache={},this.requestQueue={},this.conn=null}}]),e}();n["default"]=v,v.address=null,v.datatype="pb",v.pushInterval=5e3,v.pause=!1,t.exports=n["default"]},{"./dzhyun/DzhyunDataParser":4,"./dzhyun/DzhyunTokenManager":5,"./util":13,connection:18}],4:[function(e,t,n){(function(r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=u,r=!0}},c=e("../DataParser"),f=o(c),l=e("./parser"),p=o(l),h=e("./adapter/MSGAdapter"),d=o(h),v=e("./adapter/MSGDirectAdapter"),y=o(v),b=e("./pbTable"),_=o(b),m=e("yfloat"),g=o(m),w={news:new y["default"]},T=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.service=e}return u(t,e),a(t,[{key:"parse",value:function(e){var t=p["default"].parse(e,"UAResponse");return e=t.Data,0!==t.Err?Promise.reject({qid:t.Qid,error:e?"string"==typeof e?e:e.toUTF8?e.toUTF8():e.toString():"unknown error"}):Promise.resolve({qid:t.Qid,data:this._adapter(p["default"].parse(e,"MSG"))})}},{key:"_adapter",value:function(e){var t=this;if(!e)return e;var n=Object.keys(w),r=new d["default"];return n.some(function(e){return t.service.indexOf(e)>=0?(r=w[e],!0):void 0}),r.adapt(e)}}]),t}(f["default"]);n["default"]=T,T.parser=p["default"],T.MSGAdapter=d["default"],T.pbTable=_["default"],T.yfloat=g["default"];var E=r||void 0;E.DzhyunDataParser=T,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../DataParser":2,"./adapter/MSGAdapter":7,"./adapter/MSGDirectAdapter":8,"./parser":10,"./pbTable":11,yfloat:14}],5:[function(e,t,n){(function(r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("connection"),c=i(s),f=e("../util"),l=o(f),p=e("./DzhyunDataParser"),h=i(p),d=function(){function e(t,n,r){u(this,e),this.address=t,this.params=n,this.refreshSecond=r}return a(e,[{key:"_request",value:function(e,t){var n=this;return new Promise(function(r,o){c["default"].https(n.address,{},{response:r,error:o}).request(e+"?"+l.param(t))}).then(function(t){return new h["default"](e).parse(t)}).then(function(e){if(e=e.data[0],0==e.result)return e;throw e})}},{key:"access",value:function(e){return this._request("/token/access",e)}},{key:"refresh",value:function(e){return this._request("/token/refresh",e)}},{key:"getToken",value:function(){var e=this;return this._promise||(this._promise=Promise.resolve(this._token||this.access(this.params).then(function(t){return e._token=t.token,e._promise=null,e._refreshToken(t),e._token})))}},{key:"_refreshToken",value:function(e){var t=this,n=(e.create_time||e.refresh_time,parseInt(e.duration)),r=this.refreshSecond;0!==r&&(r=r||Math.max(n-60,10),this._refreshTimeout&&clearTimeout(this._refreshTimeout),this._refreshTimeout=setTimeout(function(){t._refreshTimeout=null,t.refresh(l.extend({access_token:t._token},t.params)).then(function(e){t._token=e.token,t._refreshToken(e)})["catch"](function(){})},1e3*r))}}]),e}();n["default"]=d;var v=r||void 0;v.DzhyunTokenManager=d,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13,"./DzhyunDataParser":4,connection:18}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"adapt",value:function(){}}]),e}();n["default"]=i,t.exports=n["default"]},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=u,r=!0}},s=e("../pbTable"),c=r(s),f=e("../jsonTable"),l=r(f),p=e("./BaseDataAdapter"),h=r(p),d=e("yfloat"),v=r(d),y=e("../protobuf"),b=r(y),_=b["default"].Long,m=["Id","Obj"],g=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"parseYFloat",value:function(e){var t=this;if(e){if("number"==typeof e||e instanceof _)return v["default"].unmakeValueToNumber(e);if(e instanceof Array){var n=[];return e.forEach(function(e){n.push(t.parseYFloat(e))}),n}if("object"==typeof e){var r=Object.keys(e);return r.forEach(function(n){e[n]=t.parseYFloat(e[n])}),e}return e}return e}},{key:"adapt",value:function(e){var t,n=e._isPb;if(null!=e.Tbl)t=c["default"].convertToJsonArray(e.Tbl,{filter:function(e,t){if("number"==typeof e||e instanceof _){if(n&&void 0!==t){var r=t.previousValue,o=t.dq;if(void 0===o){var i=v["default"].unmakeValue(e);return o=t.dq=i[1],t.previousValue=i[0]}e instanceof _&&(e=e.toNumber());var u=Math.pow(10,o);return t.previousValue=Number((r*u+e).toFixed())/u}return n?v["default"].unmakeValueToNumber(e):e}return!0}}),t=t[0],t=t[Object.keys(t)[0]];else if(null!=e.JsonTbl)t=l["default"].convertToJsonArray(e.JsonTbl),t=t[0],t=t[Object.keys(t)[0]];else{var r=Object.keys(e);r.some(function(n){var r=e[n];return m.indexOf(n)<0&&null!==r&&(!(r instanceof Array)||r.length>0)?(t=r,!0):void 0}),n===!0&&(t=this.parseYFloat(t))}return this.format(t,e.Obj)}},{key:"format",value:function(e,t){var n=e;return n instanceof Array?n.length>0&&n[0].hasOwnProperty("Obj")&&(n={},e.forEach(function(e){n[e.Obj]=e.Data||e})):null!==t&&(n={},n[t]=e),n}}]),t}(h["default"]);n["default"]=g,t.exports=n["default"]},{"../jsonTable":9,"../pbTable":11,"../protobuf":12,"./BaseDataAdapter":6,yfloat:14}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=u,r=!0}},s=e("./MSGAdapter"),c=r(s),f=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"format",value:function(e){return e}}]),t}(c["default"]);n["default"]=f,t.exports=n["default"]},{"./MSGAdapter":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function o(e){if(!e||!e.head)return e;var t=e.head,n=e.data;return n.map(function(e){var n={};return e.forEach(function(e,r){n[t[r]]=o(e)}),n})};n["default"]={convertToJsonArray:r},t.exports=n["default"]},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dzhyun"),i=r(o),u=e("./protobuf"),a=r(u),s=a["default"].ByteBuffer;n["default"]={stringToArrayBuffer:function(e){for(var t=e.length,n=new ArrayBuffer(2*t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n},arrayBufferToString:function(e){var t=new Uint8Array(e),n=t.length;if(n>65535){var r=0,o=[];do{var i=t.subarray(r,r+=65535);o.push(String.fromCharCode.apply(null,i))}while(n>r);return decodeURIComponent(escape(o.join("")))}return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},parseProtoBuf:function(e,t){var n=i["default"][t].decode(e);return n&&(n._isPb=!0),n},isBuffer:function(e){return e.constructor&&"Buffer"===e.constructor.name},parse:function(e,t){var n=e;if(!e)return e;if("string"==typeof e)try{n=JSON.parse(e)}catch(r){n=this.parseProtoBuf(this.stringToArrayBuffer(e),t)}else if(e instanceof ArrayBuffer)try{n=this.parseProtoBuf(e,t)}catch(r){n=JSON.parse(this.arrayBufferToString(e))}else if(this.isBuffer(e))try{n=this.parseProtoBuf(e,t)}catch(r){n=JSON.parse(e.toString("utf8"))}else e instanceof s&&(n=this.parseProtoBuf(e,t));return n}},t.exports=n["default"]},{"./dzhyun":14,"./protobuf":12}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./dzhyun"),i=r(o),u=e("./protobuf"),a=r(u),s=a["default"].ByteBuffer,c=i["default"].InfoType||{Type_Int:105,Type_Float:102,Type_Double:100,Type_String:115,Type_Binary:98,Type_Table:116,Type_SInt:120,Type_Unknow:0},f=i["default"].Table,l={};l[c.Type_Int]="i",l[c.Type_Float]="f",l[c.Type_Double]="d",l[c.Type_String]="s",l[c.Type_Binary]="b",l[c.Type_Table]="t",l[c.Type_SInt]="x";var p={},h=function(e){this.options=e||{},this._tableInfoStack=[]};h.prototype={_pbTableDecode:function(e){return e instanceof ArrayBuffer||e instanceof s?f.decode(e):e},_getColumnDataValues:function(e,t){if(t!==c.Type_Unknow){var n=l[t]+"Values";return e[n]}return e.iValues||e.fValues||e.dValues||e.sValues||e.bValues||e.tValues||e.xValues},_retrieveValue:function(e,t,n,r){return t==c.Type_Table&&(e=this.convert(e,0===r)),0===r||t!=c.Type_Int&&t!=c.Type_SInt||!n||(e*=n),e},_convertColumn:function(e,t,n){var r=e.Index;t=t||{};var o=t.Name||r,i=t.Type||c.Type_Unknow,u=t.Ratio,a=this._getColumnDataValues(e,i);if(null==a)throw new Error("column["+r+"] data is null");this._columnToRow(a,r,o,i,u,n)},_columnToRow:function(e,t,n,r,o,i){var u={previousValue:0,dq:void 0};e.forEach(function(e,t){var a=i[t];if(void 0===a&&(a={},i.push(a)),e=this._retrieveValue(e,r,o,t),"function"==typeof this.options.filter){var s=this.options.filter(e,r==c.Type_SInt?u:void 0);s===!1||(s===!0||void 0===s?a[n]=e:e=a[n]=s)}else a[n]=e}.bind(this)),this._tableInfoStack.pop()},convert:function(e,t){var n=this._pbTableDecode(e),r=n.Tiid,o=n.Info;if(o)t===!0?this._tableInfoStack.push(o):null,p[r]=o;else{var i=this._tableInfoStack.length;o=t===!1&&i>0?this._tableInfoStack[i]:p[r]}var u=[],a=n.Data||n.DataX;if(!a)throw new Error("table data undefined");return a.forEach(function(e){var t=e.Index,n=o?o[t]:null;this._convertColumn(e,n,u)}.bind(this)),u}},n["default"]={convertToJsonArray:function(e,t){return new h(t).convert(e)},convertToJsonTable:function(e,t){var n=new h(t);return n._columnToRow=function(e,t,n,r,o,i){var u=0;e.forEach(function(e,t){var n=i[t];void 0===n&&(n=[],i.push(n)),u=this._retrieveValue(e,u,r,o),n.push(u)}.bind(this))},n.convert(e)}},t.exports=n["default"]},{"./dzhyun":14,"./protobuf":12}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o;try{o=e("protobufjs")}catch(i){o="undefined"!=typeof dcodeIO&&dcodeIO.ProtoBuf}o||(o={},o.Long=function u(){r(this,u)},o.ByteBuffer=function a(){r(this,a)}),n["default"]=o,t.exports=n["default"]},{protobufjs:"protobufjs"}],13:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e){0===e.indexOf("?")&&(e=e.substring(1));var t,n,r=e.split("&"),o={};for(n in r)""!==r[n]&&(t=r[n].split("="),o[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return o}Object.defineProperty(n,"__esModule",{value:!0}),n.unParam=i;var u=e("connection/lib/util");o(n,r(u,o))},{"connection/lib/util":26}],14:[function(e,t,n){},{}],15:[function(e,t,n){t.exports=function(){var t=e("events"),n={};return n.createDomain=n.create=function(){function e(e){n.emit("error",e)}var n=new t.EventEmitter;return n.add=function(t){t.on("error",e)},n.remove=function(t){t.removeListener("error",e)},n.bind=function(t){return function(){var n=Array.prototype.slice.call(arguments);try{t.apply(null,n)}catch(r){e(r)}}},n.intercept=function(t){return function(n){if(n)e(n);else{var r=Array.prototype.slice.call(arguments,1);try{t.apply(null,r)}catch(n){e(n)}}}},n.run=function(t){try{t()}catch(n){e(n)}return this},n.dispose=function(){return this.removeAllListeners(),this},n.enter=n.exit=function(){return this},n},n}.call(this)},{events:16}],16:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function u(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),s=1;r>s;s++)i[s-1]=arguments[s];n.apply(this,i)}else if(u(n)){for(r=arguments.length,i=new Array(r-1),s=1;r>s;s++)i[s-1]=arguments[s];for(c=n.slice(),r=c.length,s=0;r>s;s++)c[s].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(a=i;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],17:[function(e,t,n){function r(){f=!1,a.length?c=a.concat(c):l=-1,c.length&&o()}function o(){if(!f){var e=setTimeout(r);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a[l].run();l=-1,t=c.length}a=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function u(){}var a,s=t.exports={},c=[],f=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new i(e,t)),1!==c.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=u,s.addListener=u,s.once=u,s.off=u,s.removeListener=u,s.removeAllListeners=u,s.emit=u,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],18:[function(e,t,n){e("./lib/HttpConnection"),e("./lib/WebSocketConnection"),t.exports=e("./lib/connection")},{"./lib/HttpConnection":20,"./lib/WebSocketConnection":22,"./lib/connection":25}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o,i){r(this,e),this._address=t,this.options=n||{},"boolean"==typeof o?(this._secure=o,this._handler=null):(this._secure=i||!1,this._handler=o),this._protocol="http",this._listenerMap={}}return o(e,[{key:"getAddress",value:function(){return this.getProtocol()+"://"+this._address.replace(/^(\w+:\/\/)?/,"")}},{key:"getProtocol",value:function(){return this._protocol+(this._secure?"s":"")}},{key:"request",value:function(e,t){}},{key:"send",value:function(e,t){this.request(e,t)}},{key:"close",value:function(){}},{key:"on",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]);n.indexOf(t)<0&&n.push(t)}return this}},{key:"off",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]),r=n.indexOf(t);r>=0&&n.splice(r,1)}return this}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];var i=this._listenerMap[e];return i&&i.forEach(function(e){return e.apply(t,r)}),this._handler&&"function"==typeof this._handler[e]&&this._handler[e].apply(this._handler,r),this}}]),e}();i.EVENT_OPEN="open",i.EVENT_CLOSE="close",i.EVENT_ERROR="error",i.EVENT_REQUEST="request",i.EVENT_SEND="send",i.EVENT_RESPONSE="response",i.EVENT_MESSAGE="message",i.EVENT_PROGRESS="progress",n["default"]=i,t.exports=n["default"]},{}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=u,r=!0}},s=e("./connection"),c=r(s),f=e("./BaseConnection"),l=r(f),p=e("./util"),h=e("./ajax"),d=r(h),v=function(e){function t(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this._request=[]}return i(t,e),u(t,[{key:"request",value:function(e,t){var n=this;t=p.extend({},this.options,t),t.success=function(e,t,r){n.trigger(l["default"].EVENT_MESSAGE,e),n.trigger(l["default"].EVENT_RESPONSE,e)},t.error=function(e,t,r){n.trigger(l["default"].EVENT_ERROR,r)},t.complete=function(){var e=n._request.indexOf(r);n._request.splice(e,1)},t.url=this.getAddress()+(e?e:"");
var r=d["default"](t);return r&&(r.onreadystatechange=function(e){return function(){2===r.readyState&&(n.trigger(l["default"].EVENT_SEND),n.trigger(l["default"].EVENT_REQUEST)),e&&e()}}(r.onreadystatechange)),this.trigger(l["default"].EVENT_OPEN),this._request.push(r),r.onprogress=function(e){n.trigger(l["default"].EVENT_PROGRESS,e)},this}},{key:"close",value:function(){var e=this;return this._request.forEach(function(t,n){t.abort(),e._request.splice(n,1)}),this.trigger(l["default"].EVENT_CLOSE),this}}]),t}(l["default"]);n["default"]=v,c["default"].http=function(e,t,n){return new v(e,t,n,!1)},c["default"].https=function(e,t,n){return new v(e,t,n,!0)},t.exports=n["default"]},{"./BaseConnection":19,"./ajax":24,"./connection":25,"./util":26}],21:[function(e,t,n){"use strict";if("undefined"!=typeof window)window.WebSocket?t.exports=window.WebSocket:console.log("当前浏览器不支持WebSocket");else{var r="ws";t.exports=e(r)}},{}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;a=c=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=u,r=!0}},s=e("./connection"),c=r(s),f=e("./BaseConnection"),l=r(f),p=e("./WebSocket"),h=r(p),d=function(e){function t(e,n,r){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this._protocol="ws",this._ws=null;var i=n&&n.deferred===!0||!1;i===!1&&this._connect()}return i(t,e),u(t,[{key:"getStatus",value:function(){return this._ws?this._ws.readyState:h["default"].CLOSED}},{key:"_connect",value:function(){var e=this;if("undefined"==typeof h["default"])throw Error("Don't support WebSocket");this._ws=new h["default"](this.getAddress()),void 0===h["default"].OPEN&&(h["default"].CONNECTING=this._ws.CONNECTING,h["default"].OPEN=this._ws.OPEN,h["default"].CLOSING=this._ws.CLOSING,h["default"].CLOSED=this._ws.CLOSED),this._ws.binaryType=this.options.binaryType||this.options.dataType||"arraybuffer",this._ws.addEventListener("open",function(){e.trigger(l["default"].EVENT_OPEN)}),this._ws.addEventListener("error",function(){e.trigger(l["default"].EVENT_ERROR)}),this._ws.addEventListener("close",function(){e.trigger(l["default"].EVENT_CLOSE)}),this._ws.addEventListener("message",function(t){e.trigger(l["default"].EVENT_MESSAGE,t.data),e.trigger(l["default"].EVENT_RESPONSE,t.data)})}},{key:"request",value:function(e,t){var n=this;return e=e||"",this.getStatus()===h["default"].CLOSED&&this._connect(),this.getStatus()!==h["default"].OPEN?this._ws.addEventListener("open",function(){n._ws.send(e),n.trigger(l["default"].EVENT_SEND),n.trigger(l["default"].EVENT_REQUEST)}):(this._ws.send(e),this.trigger(l["default"].EVENT_SEND),this.trigger(l["default"].EVENT_REQUEST)),this}},{key:"close",value:function(){return this.getStatus()!==h["default"].CLOSED&&(this._ws.close(),this._ws=null),this}}]),t}(l["default"]);n["default"]=d,c["default"].ws=function(e,t,n){return new d(e,t,n,!1)},c["default"].wss=function(e,t,n){return new d(e,t,n,!0)},t.exports=n["default"]},{"./BaseConnection":19,"./WebSocket":21,"./connection":25}],23:[function(e,t,n){"use strict";if("undefined"!=typeof window)window.XMLHttpRequest?t.exports=window.XMLHttpRequest:console.log("当前浏览器不支持XMLHttpRequest");else{var r="xhr2",o=e(r);t.exports=o.XMLHttpRequest||o}},{}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0})}function i(e){if("undefined"==typeof ArrayBuffer)throw new Error("不支持ArrayBuffer类型");if(e.response instanceof ArrayBuffer)return e.response;for(var t=e.responseText,n=t.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;n>i;i++)o[i]=255&t.charCodeAt(i);return r}function u(e){if("undefined"==typeof Blob)throw new Error("不支持Blob类型");if(e.response instanceof Blob)return e.response;var t=i(e);return new Blob([t])}var a=e("./XMLHttpRequest"),s=r(a),c=e("./util");if("undefined"!=typeof $&&"function"==typeof $.ajax&&"undefined"==typeof XDomainRequest){var f=function(e,t,n){return{send:function(t,n){var r,a,s,c;c=e.xhr(),s=e.url,a=e.type,r=e.data||null,c.onload=function(){var t="arraybuffer"===e.dataType?i(c):u(c),r=o({},e.dataType,t);return n(c.status,c.statusText,r,c.getAllResponseHeaders())},c.onerror="error",function(e){return n(-1,e)},c.ontimeout=function(e){return n(-1,e)},c.open(a,s,!0);var f="string"==typeof c.responseType;f?c.responseType=e.dataType:c.overrideMimeType?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined");for(var l in t)c.setRequestHeader(l,t[l]);return c.send(r)},abort:function(){return n.abort()}}},l=$.ajaxSettings.xhr;$.support.cors=!0,$.ajaxSetup({xhr:function O(){var O=l();return this.setXHR(O),O},beforeSend:function(e,t){t.setXHR=function(t){t.abort=e.abort,e.xhr=t}},crossDomain:!0}),$.ajaxTransport("+arraybuffer",f),$.ajaxTransport("+blob",f),t.exports=function(){var e=$.ajax.apply($,[].slice.call(arguments));return e.xhr}}else{var p,h,d,v,y,b,_,m,g,w,T,E;!function(){var e=function(e,t,n){return!0},n=function(t,n,r,o){return t.global?e(n||d,r,o):void 0},r=function(e){e.global&&0===E.active++&&n(e,null,"ajaxStart")},o=function(e){e.global&&!--E.active&&n(e,null,"ajaxStop")},a=function(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||n(t,r,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,r,"ajaxSend",[e,t])},f=function(e,t,r){var o=r.context,i="success";r.success.call(o,e,i,t),n(r,o,"ajaxSuccess",[t,r,e]),O(i,t,r)},l=function(e,t,r,o){var i=o.context;o.error.call(i,r,t,e),n(o,i,"ajaxError",[r,o,e]),O(t,r,o)},O=function(e,t,r){var i=r.context;r.complete.call(i,t,e),n(r,i,"ajaxComplete",[t,r]),o(r)},j=function(){},x=function(e){return e&&(e==w?"html":e==g?"json":_.test(e)?"script":m.test(e)&&"xml")||"text"},k=function(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")},S=function(e){"object"==typeof e.data&&(e.data=c.param(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=k(e.url,e.data))};p=0,h="undefined"==typeof window,d=!h&&window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,m=/^(?:text|application)\/xml/i,g="application/json",w="text/html",T=/^\s*$/,E=t.exports=function(e){var t=c.extend({},e||{});for(v in E.settings)void 0===t[v]&&(t[v]=E.settings[v]);r(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&!h&&!!window.location&&RegExp.$2!=window.location.host);var n=t.dataType,o=/=\?/.test(t.url);if("jsonp"==n||o)return o||(t.url=k(t.url,"callback=?")),E.JSONP(t);t.url||(t.url=!h&&!!window.location&&window.location.toString()),S(t);var s,p=t.accepts[n],d={},b=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:!h&&!!window.location&&window.location.protocol,_=E.settings.xhr();t.crossDomain?"undefined"!=typeof XDomainRequest&&(_=new XDomainRequest,_.onload=function(){_.readyState=4,_.status=200,_.onreadystatechange()},_.error=function(){_.readyState=4,_.status=400,_.onreadystatechange()}):d["X-Requested-With"]="XMLHttpRequest",p&&(d.Accept=p,p.indexOf(",")>-1&&(p=p.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(p)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(d["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=c.extend(d,t.headers||{}),_.onreadystatechange=function(){if(4==_.readyState){clearTimeout(s);var e,r=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==b){n=n||x(_.contentType||_.getResponseHeader&&_.getResponseHeader("content-type"));try{"script"==n?(1,eval)(e):e="xml"==n?_.responseXML:"json"==n?T.test(_.responseText)?null:JSON.parse(_.responseText):"arraybuffer"===n?i(_):"blob"===n?u(_):_.responseText}catch(o){r=o}r?l(r,"parsererror",_,t):f(e,_,t)}else l(null,"error",_,t)}};var m="async"in t?t.async:!0;if(_.open(t.type,t.url,m),"arraybuffer"==n||"blob"==n){var g="string"==typeof _.responseType;g?_.responseType=e.dataType:_.overrideMimeType?_.overrideMimeType("text/plain; charset=x-user-defined"):_.setRequestHeader("Accept-Charset","x-user-defined")}for(y in t.headers)_.setRequestHeader(y,t.headers[y]);return a(_,t)===!1?(_.abort(),!1):(t.timeout>0&&(s=setTimeout(function(){_.onreadystatechange=j,_.abort(),l(null,"timeout",_,t)},t.timeout)),_.send(t.data?t.data:null),_)},E.active=0,E.JSONP=function(e){if(!("type"in e))return E(e);var t,n="jsonp"+ ++p,r=d.createElement("script"),o=function(){!h&&n in window&&(window[n]=j),O("abort",i,e)},i={abort:o},u=d.getElementsByTagName("head")[0]||d.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error()}),h||(window[n]=function(r){clearTimeout(t),delete window[n],f(r,i,e)}),S(e),r.src=e.url.replace(/=\?/,"="+n),u.insertBefore(r,u.firstChild),e.timeout>0&&(t=setTimeout(function(){i.abort(),O("timeout",i,e)},e.timeout)),i},E.settings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new s["default"]},accepts:{script:"text/javascript, application/javascript",json:g,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0},E.get=function(e,t){return E({url:e,success:t})},E.post=function(e,t,n,r){return"function"==typeof t&&(r=r||n,n=t,t=null),E({type:"POST",url:e,data:t,success:n,dataType:r})},E.getJSON=function(e,t){return E({url:e,success:t,dataType:"json"})}}()}},{"./XMLHttpRequest":23,"./util":26}],25:[function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t,n){if("string"!=typeof e)throw new Error("url is incorrect");var i=/^((\w+):\/\/)?(.*)/.exec(e),u=r(i,4),a=u[2],s=void 0===a?"http":a,c=u[3],f=o[s];if(!f)throw new Error('protocol "'+s+'" no support');return f(c,t,n)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o,t.exports=n["default"]},{}],26:[function(e,t,n){"use strict";function r(e,t,n,o){var i=t instanceof Array;for(var u in t){var a=t[u];o&&(u=n?o:o+"["+(i?"":u)+"]"),!o&&i?e.add(a.name,a.value):(n?a instanceof Array:"object"==typeof a)?r(e,a,n,u):e.add(u,a)}}function o(e,t){var n=[];return n.add=function(e,t){this.push(u(e)+"="+u(t))},r(n,e,t),n.join("&").replace("%20","+")}function i(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e}Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=r,n.param=o,n.extend=i;var u=encodeURIComponent},{}],27:[function(e,t,n){"use strict";t.exports=e("./lib")},{"./lib":32}],28:[function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(t){return y=t,b}}function i(e,t){try{return e(t)}catch(n){return y=n,b}}function u(e,t,n){try{e(t,n)}catch(r){return y=r,b}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&d(e,this)}function s(e,t,n){return new e.constructor(function(o,i){var u=new a(r);u.then(o,i),c(e,new h(t,n,u))})}function c(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void v(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?f(t.promise,e._12):l(t.promise,e._12));var r=i(n,e._12);r===b?l(t.promise,y):f(t.promise,r)})}function f(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=o(t);if(n===b)return l(e,y);if(n===e.then&&t instanceof a)return e._37=3,e._12=t,void p(e);if("function"==typeof n)return void d(n.bind(t),e)}e._37=1,e._12=t,p(e)}function l(e,t){e._37=2,e._12=t,p(e)}function p(e){for(var t=0;t<e._59.length;t++)c(e,e._59[t]);e._59=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1,r=u(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,l(t,e))});n||r!==b||(n=!0,l(t,y))}var v=e("asap/raw"),y=null,b={};t.exports=a,a._99=r,a.prototype.then=function(e,t){if(this.constructor!==a)return s(this,e,t);var n=new a(r);return c(this,new h(e,t,n)),n}},{"asap/raw":36}],29:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})}},{"./core.js":28}],30:[function(e,t,n){"use strict";function r(e){var t=new o(o._99);return t._37=1,t._12=e,t}var o=e("./core.js");t.exports=o;var i=r(!0),u=r(!1),a=r(null),s=r(void 0),c=r(0),f=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return a;if(void 0===e)return s;if(e===!0)return i;if(e===!1)return u;if(0===e)return c;if(""===e)return f;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(u,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof o&&a.then===o.prototype.then){for(;3===a._37;)a=a._12;return 1===a._37?r(u,a._12):(2===a._37&&n(a._12),void a.then(function(e){r(u,e)},n))}var s=a.then;if("function"==typeof s){var c=new o(s.bind(a));return void c.then(function(e){r(u,e)},n)}}t[u]=a,0===--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,u=0;u<t.length;u++)r(u,t[u])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":28}],31:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.prototype["finally"]=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},{"./core.js":28}],32:[function(e,t,n){"use strict";t.exports=e("./core.js"),e("./done.js"),e("./finally.js"),e("./es6-extensions.js"),e("./node-extensions.js")},{"./core.js":28,"./done.js":29,"./es6-extensions.js":30,"./finally.js":31,"./node-extensions.js":33}],33:[function(e,t,n){"use strict";var r=e("./core.js"),o=e("asap");t.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,t>0?t:0);return new r(function(t,r){o.push(function(e,n){e?r(e):t(n)});var i=e.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||t(i)})}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,i=this;try{return e.apply(this,arguments).nodeify(n,i)}catch(u){if(null===n||"undefined"==typeof n)return new r(function(e,t){t(u)});o(function(){n.call(i,u)})}}},r.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},{"./core.js":28,asap:34}],34:[function(e,t,n){"use strict";function r(){if(s.length)throw s.shift()}function o(e){var t;t=a.length?a.pop():new i,t.task=e,u(t)}function i(){this.task=null}var u=e("./raw"),a=[],s=[],c=u.makeRequestCallFromTimer(r);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(s.push(e),c())}finally{this.task=null,a[a.length]=this}}},{"./raw":35}],35:[function(e,t,n){(function(e){"use strict";function n(e){a.length||(u(),s=!0),a[a.length]=e}function r(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>f){for(var t=0,n=a.length-c;n>t;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,s=!1}function o(e){var t=1,n=new l(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var u,a=[],s=!1,c=0,f=1024,l=e.MutationObserver||e.WebKitMutationObserver;u="function"==typeof l?o(r):i(r),n.requestFlush=u,n.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(e,t,n){(function(n){"use strict";function r(e){s.length||(i(),c=!0),s[s.length]=e}function o(){for(;f<s.length;){var e=f;if(f+=1,s[e].call(),f>l){for(var t=0,n=s.length-f;n>t;t++)s[t]=s[t+f];s.length-=f,f=0}}s.length=0,f=0,c=!1}function i(){var t=n.domain;t&&(u||(u=e("domain")),u.active=n.domain=null),c&&a?setImmediate(o):n.nextTick(o),t&&(u.active=n.domain=t)}var u,a="function"==typeof setImmediate;t.exports=r;var s=[],c=!1,f=0,l=1024;r.requestFlush=i}).call(this,e("_process"))},{_process:17,domain:15}]},{},[1])(1)});